/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{SCALE_DIRECTION as r,DIRECTION as o,BACKGROUND_ANIMATION_EFFECTS as t}from"../../constants.js";import e from"../../parts/simpleAnimation.js";import{EffectBackgroundPan as n}from"../backgroundPan/index.js";import{EffectBackgroundZoom as i}from"../backgroundZoom/index.js";import"@googleforcreators/units";import{getMediaBoundOffsets as a}from"../../utils/mediaPositions.js";import{getMediaOrigin as m}from"../../utils/getMediaOrigin.js";const s={fill:"forwards",duration:2e3};function EffectBackgroundPanAndZoom(l){let{element:f,zoomDirection:c=r.SCALE_IN,panDir:d=o.RIGHT_TO_LEFT,duration:T=2e3,delay:g,easing:A="cubic-bezier(.14,.34,.47,.9)"}=l;const O={...s,duration:T,delay:g,easing:A},u=`direction-${d}-${c}-${t.PAN_AND_ZOOM.value}`,P=m(f&&a({element:f})),_={[o.RIGHT_TO_LEFT]:{horizontal:0,vertical:P.vertical},[o.LEFT_TO_RIGHT]:{horizontal:100,vertical:P.vertical},[o.BOTTOM_TO_TOP]:{horizontal:P.horizontal,vertical:0},[o.TOP_TO_BOTTOM]:{horizontal:P.horizontal,vertical:100}}[d]||[],{generatedKeyframes:p}=i({element:f,zoomDirection:c,transformOrigin:_}),{generatedKeyframes:v}=n({element:f,panDir:d}),z=Object.values(p)?.[0]||[],h=Object.values(v)?.[0]||[],j=`${h?.transform[0]} ${z?.transform[0]}`,M=(z?.transform?.length||1)-1,$=(h?.transform?.length||1)-1,b={transform:[j,`${h?.transform[M]} ${z?.transform[$]}`]},{id:E,WAAPIAnimation:I,AMPTarget:y,AMPAnimation:D}=e(u,b,O,!1,!0);return{id:E,WAAPIAnimation:I,AMPTarget:y,AMPAnimation:D,generatedKeyframes:{[u]:b}}}export{EffectBackgroundPanAndZoom};
