/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../constants.js"),r=require("../../parts/simpleAnimation.js"),t=require("../backgroundPan/index.js"),n=require("../backgroundZoom/index.js");require("@googleforcreators/units");var i=require("../../utils/mediaPositions.js"),a=require("../../utils/getMediaOrigin.js");const o={fill:"forwards",duration:2e3};exports.EffectBackgroundPanAndZoom=function EffectBackgroundPanAndZoom(s){let{element:l,zoomDirection:c=e.SCALE_DIRECTION.SCALE_IN,panDir:d=e.DIRECTION.RIGHT_TO_LEFT,duration:u=2e3,delay:m,easing:O="cubic-bezier(.14,.34,.47,.9)"}=s;const f={...o,duration:u,delay:m,easing:O},T=`direction-${d}-${c}-${e.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value}`,g=a.getMediaOrigin(l&&i.getMediaBoundOffsets({element:l})),A={[e.DIRECTION.RIGHT_TO_LEFT]:{horizontal:0,vertical:g.vertical},[e.DIRECTION.LEFT_TO_RIGHT]:{horizontal:100,vertical:g.vertical},[e.DIRECTION.BOTTOM_TO_TOP]:{horizontal:g.horizontal,vertical:0},[e.DIRECTION.TOP_TO_BOTTOM]:{horizontal:g.horizontal,vertical:100}}[d]||[],{generatedKeyframes:I}=n.EffectBackgroundZoom({element:l,zoomDirection:c,transformOrigin:A}),{generatedKeyframes:_}=t.EffectBackgroundPan({element:l,panDir:d}),E=Object.values(I)?.[0]||[],P=Object.values(_)?.[0]||[],v=`${P?.transform[0]} ${E?.transform[0]}`,D=(E?.transform?.length||1)-1,M=(P?.transform?.length||1)-1,N={transform:[v,`${P?.transform[D]} ${E?.transform[M]}`]},{id:C,WAAPIAnimation:R,AMPTarget:j,AMPAnimation:z}=r.default(T,N,f,!1,!0);return{id:C,WAAPIAnimation:R,AMPTarget:j,AMPAnimation:z,generatedKeyframes:{[T]:N}}};
