/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import"prop-types";import{useCallback as t,useMemo as o}from"@googleforcreators/react";import{__}from"@googleforcreators/i18n";import{THEME_CONSTANTS as r,Icons as s,Text as n}from"@googleforcreators/design-system";import"../../../../../types.js";import"../../../../../constants/index.js";import"../../../../../components/cardGallery/components.js";import"../../../../../components/cardGrid/index.js";import"../../../../../components/cardGridItem/index.js";import"../../../../../components/colorList/index.js";import"../../../../../components/contentGutter/index.js";import"styled-components";import"../../../../../components/fileUpload/index.js";import"../../../../../components/infiniteScroller/index.js";import"../../../../../components/inlineInputForm/index.js";import"../../../../../components/layout/provider.js";import"../../../../../components/layout/scrollable.js";import"../../../../../components/layout/fixed.js";import"../../../../../components/pageStructure/pageStructureComponents.js";import"../../../../../components/pageStructure/leftRail.js";import"../../../../../components/pageStructure/menuButton.js";import"../../../../../components/navProvider.js";import"../../../../../components/scrollToTop/index.js";import"../../../../../components/storyMenu/index.js";import{Table as i,StickyTableHeader as a,TableRow as l,TablePreviewHeaderCell as c,TableTitleHeaderCell as m,TableAuthorHeaderCell as E,TableDateHeaderCell as p,TableStatusHeaderCell as d,TableBody as A}from"../../../../../components/table/index.js";import"../../../../config/context.js";import S from"../../../../config/useConfig.js";import"../../../../../components/viewStyleBar/index.js";import{StoryListItem as u}from"../storyListItem/index.js";import{ListView as y,SelectableTitle as w,ArrowIcon as D,ArrowIconWithTitle as T,EmptyIconSpace as f}from"./components.js";import{SORT_DIRECTION as C,ORDER_BY_SORT as b,STORY_SORT_OPTIONS as j,STORY_STATUS as L}from"../../../../../constants/stories.js";const R={[C.DESC]:C.ASC,[C.ASC]:C.DESC};function StoryListView(M){let{handleSortChange:P,handleSortDirectionChange:I,hideStoryList:_,renameStory:Y,sortDirection:g,stories:x,storyMenu:v,storySort:h,storyStatus:B}=M;const{userId:O,styleConstants:{topOffset:G}}=S(),k=t((e=>{e!==h?(P(e),I(b[e])):I(R[g])}),[I,P,h,g]),z=t(((e,t)=>{let{key:o}=e;"Enter"===o&&k(t)}),[k]),F=o((()=>!_&&x.map((t=>e.createElement(u,{key:`story-${t.id}`,story:t,userId:O,renameStory:Y,storyStatus:B,storyMenu:v})))),[_,Y,x,B,v,O]);return e.createElement(y,{"data-testid":"story-list-view"},e.createElement(i,{"aria-label":__("List view of created stories","web-stories")},e.createElement(a,{topOffset:G},e.createElement(l,null,e.createElement(c,{onClick:()=>k(j.NAME),onKeyDown:e=>z(e,j.NAME)},e.createElement(w,{"aria-label":__("Title, select to sort table by story title","web-stories"),forwardedAs:"span",size:r.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},__("Title","web-stories"))),e.createElement(m,{onClick:()=>k(j.NAME),onKeyDown:e=>z(e,j.NAME)},e.createElement(w,{"aria-hidden":!0,active:h===j.NAME,forwardedAs:"span",size:r.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},__("Title","web-stories")),e.createElement(D,{active:h===j.NAME,asc:g===C.ASC},e.createElement(s.ArrowDown,null))),e.createElement(E,null,e.createElement(w,{"aria-label":__("Author, select to sort table by story author","web-stories"),onClick:()=>k(j.CREATED_BY),onKeyDown:e=>z(e,j.CREATED_BY),active:h===j.CREATED_BY,forwardedAs:"span",size:r.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},__("Author","web-stories")),e.createElement(T,{"aria-hidden":!0,active:h===j.CREATED_BY,asc:g===C.ASC},h===j.CREATED_BY?e.createElement(s.ArrowDown,null):e.createElement(f,null))),e.createElement(p,null,e.createElement(w,{"aria-label":__("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>k(j.DATE_CREATED),onKeyDown:e=>z(e,j.DATE_CREATED),active:h===j.DATE_CREATED,forwardedAs:"span",size:r.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},__("Date Created","web-stories")),e.createElement(T,{"aria-hidden":!0,active:h===j.DATE_CREATED,asc:g===C.ASC},e.createElement(s.ArrowDown,null))),e.createElement(p,null,e.createElement(w,{"aria-label":__("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>k(j.LAST_MODIFIED),onKeyDown:e=>z(e,j.LAST_MODIFIED),active:h===j.LAST_MODIFIED,forwardedAs:"span",size:r.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},__("Last Modified","web-stories")),e.createElement(T,{"aria-hidden":!0,active:h===j.LAST_MODIFIED,asc:g===C.ASC},e.createElement(s.ArrowDown,null))),B!==L.DRAFT&&e.createElement(d,null,e.createElement(n,{as:"span",isBold:!0,size:r.TYPOGRAPHY.PRESET_SIZES.SMALL},__("Publish State","web-stories"))))),e.createElement(A,null,F)))}export{StoryListView as default};
