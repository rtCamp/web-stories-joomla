/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{__}from"@googleforcreators/i18n";import t from"prop-types";import r from"styled-components";import{useCallback as n,Fragment as o}from"@googleforcreators/react";import{themeHelpers as i,ContextMenu as a,ContextMenuComponents as l}from"@googleforcreators/design-system";import s from"../../icons/moreVertical.svg.js";const m="context-menu-button",c=r.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(e=>{let{menuOpen:t,isVisible:r}=e;return t||r?1:0}),(e=>{let{theme:t,$isInverted:r}=e;return r?t.colors.inverted.fg.primary:t.colors.interactiveFg.brandNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,$isInverted:r}=e;return i.focusableOutlineCSS(!1,!!r&&t.colors.standard.black)}));c.propTypes={menuOpen:t.bool};const u=r.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(e=>{let{verticalAlign:t="flex-start"}=e;return t}),(e=>{let{$menuStyleOverrides:t}=e;return t}));function StoryMenu(t){let{contextMenuId:r,onMoreButtonSelected:i,storyId:m,verticalAlign:p,menuItems:d,itemActive:g,tabIndex:b,menuStyleOverrides:f,menuLabel:v,isInverted:y}=t;const x=r===m,M=n((e=>i(e,-1)),[i]);return e.createElement(u,{verticalAlign:p,"data-testid":`story-context-menu-${m}`,$menuStyleOverrides:f},e.createElement(c,{"data-testid":`story-context-button-${m}`,tabIndex:b,menuOpen:x,isVisible:g,"aria-label":v||__("More Options","web-stories"),onClick:e=>i(e,x?-1:m),className:"context-menu-button",$isInverted:y},e.createElement(s,null)),e.createElement(a,{animate:!0,isOpen:x,onDismiss:M},d.map((t=>{let{label:r,separator:n,...i}=t;const a=i.href?l.MenuLink:l.MenuButton;return e.createElement(o,{key:r},"top"===n&&e.createElement(l.MenuSeparator,null),e.createElement(a,i,r),"bottom"===n&&e.createElement(l.MenuSeparator,null))}))))}u.propTypes={verticalAlign:t.oneOf(["center","flex-start","flex-end"])};export{m as CONTEXT_MENU_BUTTON_CLASS,c as MoreVerticalButton,StoryMenu as default};
