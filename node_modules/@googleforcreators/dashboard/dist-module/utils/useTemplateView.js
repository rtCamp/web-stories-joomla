/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{useState as e,useCallback as t,useMemo as s}from"@googleforcreators/react";import{clamp as r}from"@googleforcreators/units";import o from"prop-types";import{VIEW_STYLE as a}from"../constants/index.js";import{PageSizePropType as p}from"../types.js";import n from"./usePagePreviewSize.js";import{TEMPLATES_GALLERY_SORT_OPTIONS as u,TEMPLATES_GALLERY_STATUS as i}from"../constants/templates.js";function f(o){let{totalPages:p}=o;const[f,l]=e(""),[m,c]=e(u.POPULAR),[g,v]=e(1),{pageSize:y}=n({isGrid:!0}),d=t((e=>{v(r(e,{MIN:1,MAX:p}))}),[p]),P=t((()=>d(g+1)),[g,d]),h=t((e=>{c(e),d(1)}),[d]),j=t((e=>{d(1),l(e)}),[d]);return s((()=>({view:{style:a.GRID,pageSize:y},sort:{value:m,set:h},filter:{value:i.ALL,set:()=>{}},page:{value:g,set:v,requestNextPage:P},search:{keyword:f,setKeyword:j}})),[y,m,h,g,P,f,j])}o.shape({style:o.oneOf(Object.values(a)),pageSize:p}),o.shape({value:o.oneOfType([o.number,o.string]),set:o.func}),o.shape({value:o.number,set:o.func,requestNextPage:o.func}),o.shape({keyword:o.string,setKeyword:o.func}),o.shape({value:o.oneOf(Object.values(u)),set:o.func});export{f as default};
