/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react"),r=require("@googleforcreators/tracking"),a=require("@googleforcreators/i18n"),l=require("@googleforcreators/design-system"),n=require("styled-components");require("../../app/router/routerProvider.js");var o=require("../../app/router/useRouteHistory.js"),i=require("../../app/router/route.js"),s=require("../navProvider.js");require("../../app/api/apiProvider.js"),require("prop-types"),require("../../app/config/context.js");var u=require("../../app/config/useConfig.js"),c=require("../../constants/index.js"),f=require("./navigationComponents.js"),E=require("./pageStructureComponents.js");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=p(e);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},v.apply(this,arguments)}const S=p(n).default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);module.exports=function LeftRail(){const e=o((e=>{let{state:t}=e;return t.activeRoute})),{newStoryURL:n,version:p,leftRailSecondaryNavigation:T,canViewDefaultTemplates:m,styleConstants:{topOffset:_}}=u(),g=t.useRef(null),b=t.useRef(null),{state:{sideBarVisible:C},actions:{toggleSideBar:L}}=s.useNavContext(),R=t.useCallback((e=>{let{target:t}=e;t!==g.current&&t!==b.current&&L()}),[L,g,b]),P=t.useCallback((()=>{C&&L()}),[L,C]);t.useFocusOut(g,P,[C]),t.useLayoutEffect((()=>{C&&g.current&&g.current.focus()}),[C]);const A=t.useCallback((()=>{r.trackEvent("create_new_story")}),[]),N=t.useCallback(((e,t)=>{r.trackClick(e,t.trackingEvent)}),[]);return d.default.createElement(E.LeftRailContainer,{onClickCapture:R,ref:g,isOpen:C,topOffset:_,role:"navigation","aria-label":a.__("Main dashboard navigation","web-stories")},d.default.createElement("div",{ref:b},d.default.createElement(f.Header,{forwardedAs:"h2"},d.default.createElement(l.LogoWithTypeCircleColor,{title:a.__("Web Stories Dashboard","web-stories")})),d.default.createElement(f.Content,null,d.default.createElement(l.Button,{type:l.BUTTON_TYPES.QUATERNARY,size:l.BUTTON_SIZES.SMALL,href:n,onClick:A},a.__("Create New Story","web-stories"))),d.default.createElement(f.Content,null,d.default.createElement(f.NavList,null,c.PRIMARY_PATHS.map((t=>{let{Icon:r,...n}=t;return n.value===c.APP_ROUTES.TEMPLATES_GALLERY&&!m?null:d.default.createElement(f.NavListItem,{key:n.value},d.default.createElement(f.NavLink,v({active:e===n.value,href:i.resolveRoute(n.value),size:l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0,isIconLink:Boolean(r),"aria-label":e===n.value?a.sprintf(
/* translators: %s: the current page, for example "Dashboard". */
a.__("%s (active view)","web-stories"),n.label):n.label},n.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>N(e,n)}),d.default.createElement(S,null,r&&d.default.createElement(r,{width:"22px"})),d.default.createElement(f.PathName,{as:"span",isBold:!0},n.label)))}))))),d.default.createElement(f.Content,null,T&&d.default.createElement(f.NavList,null,T.map((t=>d.default.createElement(f.NavListItem,{key:t.value},d.default.createElement(f.NavLink,v({active:e===t.value,href:i.resolveRoute(t.value),size:l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-label":e===t.value?a.sprintf(
/* translators: %s: the current page, for example "Dashboard". */
a.__("%s (active view)","web-stories"),t.label):t.label},t.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>N(e,t)}),d.default.createElement(l.Text,{as:"span",size:l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},t.label)))))),d.default.createElement(f.AppInfo,{size:l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},a.sprintf(
/* translators: 1: Current Year, 2: App Version */
a.__("Â© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),p))))};
