/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("../../constants/index.js"),require("@googleforcreators/i18n"),require("../../utils/keyboardOnlyOutline.js"),require("@googleforcreators/react"),require("@googleforcreators/units"),require("../../utils/useStoryView.js"),require("../../utils/useTemplateView.js");var e=require("../../utils/noop.js"),r=require("../../constants/stories.js");exports.generateStoryMenu=t=>{let{menuItems:s,story:o,isLocked:i}=t;const a=s.default?()=>s.default(o):e.noop;return s.filter((e=>void 0===e.isEnabled||e.isEnabled(o))).map((e=>{let{capability:t,value:n,...u}=e;const l=(e=>s.find((r=>r?.value===e)))(n),T={onClick:l?()=>l.action(o):a};switch(n){case r.STORY_CONTEXT_MENU_ACTIONS.OPEN_IN_EDITOR:T.href=o.bottomTargetAction,T.openNewTab=!1;break;case r.STORY_CONTEXT_MENU_ACTIONS.OPEN_STORY_LINK:T.href=o.previewLink,T.openNewTab=!0;break;case r.STORY_CONTEXT_MENU_ACTIONS.RENAME:case r.STORY_CONTEXT_MENU_ACTIONS.DELETE:T.disabled=i}return delete u?.action,{...u,...T}}))};
