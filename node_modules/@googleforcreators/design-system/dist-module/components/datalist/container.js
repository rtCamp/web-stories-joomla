/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{forwardRef as r,useRef as t,useState as o,useFocusOut as n,useCallback as i,useEffect as s,useMemo as a}from"@googleforcreators/react";import"prop-types";import l,{css as d}from"styled-components";import{v4 as p}from"uuid";import c from"./searchInput.js";import{isKeywordFilterable as m}from"./utils.js";const u=l.div.withConfig({displayName:"container__Container",componentId:"sc-n7ncmi-0"})(["position:relative;display:flex;flex-direction:row;flex-wrap:wrap;width:100%;min-width:120px;z-index:2;background-color:",";border-radius:",";padding:5px;margin-top:16px;"," "," ",";"],(e=>{let{theme:r}=e;return r.colors.bg.primary}),(e=>{let{theme:r}=e;return r.borders.radius.small}),(e=>{let{isInline:r}=e;return r&&d(["position:absolute;margin-top:0;padding:0;min-width:initial;width:initial;"])}),(e=>{let{theme:r,hasDropDownBorder:t}=e;return t&&d(["border:1px solid ",";"],r.colors.border.defaultNormal)}),(e=>{let{$containerStyleOverrides:r}=e;return r}));var f=r((function OptionsContainer(r,l){let{onClose:d,isOpen:f,getOptionsByQuery:h,hasSearch:g,renderContents:w,isInline:x,hasDropDownBorder:y=!1,containerStyleOverrides:v,title:O}=r;const b=t(),[C,I]=o(""),[D,B]=o(null),[E,S]=o(!0),[$,j]=o(0);n(b,d,[d]);const F=i((e=>{let{target:{value:r}}=e;return I(r)}),[]),N=i((()=>{h(C).then(B)}),[h,C]);s((()=>{h&&m(C)?N():B(null)}),[h,C,N]),s((()=>{f&&l?.current?.focus()}),[f,l]);const _=a((()=>`list-${p()}`),[]);return e.createElement(u,{role:"dialog",title:O,ref:b,isInline:x,hasDropDownBorder:y,$containerStyleOverrides:v},g&&e.createElement(c,{ref:l,value:C,onChange:F,onClose:d,isExpanded:E,focusFontListFirstOption:()=>j((e=>e+1)),"aria-owns":_}),w({searchKeyword:C,setIsExpanded:S,trigger:$,queriedOptions:D,listId:_}))}));export{f as default};
