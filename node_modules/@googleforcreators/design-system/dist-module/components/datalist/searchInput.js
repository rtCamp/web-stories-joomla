/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{forwardRef as t,useCallback as r}from"@googleforcreators/react";import"prop-types";import o,{css as n}from"styled-components";import{__}from"@googleforcreators/i18n";import a from"../../icons/magnifier.svg.js";import s from"../../icons/cross.svg.js";import{noop as i}from"../../utils/noop.js";import{Button as l}from"../button/button.js";import{BUTTON_VARIANTS as c}from"../button/constants.js";import{expandTextPreset as p}from"../../theme/helpers/expandPresetStyles.js";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},m.apply(this,arguments)}const h=o.div.withConfig({displayName:"searchInput__SearchContainer",componentId:"sc-ewszoh-0"})(["position:relative;width:100%;"]),u=n(["position:absolute;display:flex;justify-content:center;align-items:center;top:50%;width:30px;padding:0;margin:0;transform:translateY(-50%);background-color:transparent;border:none;> svg{height:100%;width:auto;color:",";fill:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),d=o.div.withConfig({displayName:"searchInput__SearchIconContainer",componentId:"sc-ewszoh-1"})([""," left:0;height:28px;"],u),f=o(l).attrs({variant:c.ICON}).withConfig({displayName:"searchInput__ClearButton",componentId:"sc-ewszoh-2"})(["",";right:0;height:20.5px;opacity:0.4;"],u),g=o.input.attrs({type:"search",role:"combobox","aria-autocomplete":"list"}).withConfig({displayName:"searchInput__Input",componentId:"sc-ewszoh-3"})(["width:100%;padding:6px 20px 6px 30px;border-radius:",";background:",";border:1px solid ",";color:",";"," &::-ms-clear{display:none;}&::-webkit-search-decoration,&::-webkit-search-cancel-button,&::-webkit-search-results-button,&::-webkit-search-results-decoration{appearance:none;}&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultActive}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),p(((e,t)=>{let{paragraph:r}=e,{SMALL:o}=t;return r[o]})),(e=>{let{theme:t}=e;return t.colors.border.focus}));var b=t((function SearchInput(t,o){let{isExpanded:n,onClose:l,value:c,onChange:p,focusFontListFirstOption:u=i,...b}=t;const w=r((e=>{e.stopPropagation();const{key:t}=e;"Escape"===t?l():"ArrowDown"===t&&u()}),[l,u]);return e.createElement(h,null,e.createElement(g,m({ref:o,"aria-expanded":n,value:c,onKeyDown:w,placeholder:__("Search","web-stories"),onChange:p,"aria-label":__("Search","web-stories")},b)),e.createElement(d,null,e.createElement(a,null)),c.trim().length>0&&e.createElement(f,{onClick:()=>p({target:{value:""}})},e.createElement(s,null)))}));export{b as default};
