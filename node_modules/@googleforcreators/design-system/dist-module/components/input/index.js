/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import o from"prop-types";import{forwardRef as r,useMemo as t,useState as i}from"@googleforcreators/react";import n,{css as s}from"styled-components";import{v4 as a}from"uuid";import{THEME_CONSTANTS as l}from"../../theme/constants/index.js";import{Text as d}from"../typography/text/index.js";import c from"../../utils/labelAccessibilityValidator.js";import{focusCSS as p}from"../../theme/helpers/outline.js";import{expandPresetStyles as m}from"../../theme/helpers/expandPresetStyles.js";function u(){return u=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},u.apply(this,arguments)}const f=n.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),h=n(d).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),g=n(d).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:o,theme:r}=e;return r.colors.fg[o?"negative":"tertiary"]})),b=n(d).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:o}=e;return o.colors.fg.tertiary})),y=n.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:o,hasError:r,theme:t,styleOverride:i}=e;return s(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],t.colors.border[r?"negativeNormal":"defaultNormal"],t.borders.radius.small,o&&!r&&s(["border-color:",";"],t.colors.border.defaultActive),o&&s(["","{color:",";}"],b,t.colors.fg.primary),p(t.colors.border.focus),i)})),x=n.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:o,theme:r}=e;return s(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],o&&s(["padding-right:8px;"]),r.colors.fg.primary,m({preset:{...r.typography.presets.paragraph[l.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:r}),r.colors.fg.tertiary,r.colors.fg.disable,r.colors.border.disable,b,r.colors.fg.disable,r.colors.fg.primary)})),w=r(((o,r)=>{let{className:n,disabled:s,hasError:d,hint:c,id:p,label:m,onBlur:w,onFocus:v,hasFocus:E=!1,suffix:_,unit:S="",value:I="",isIndeterminate:N=!1,containerStyleOverride:j="",...C}=o;const O=t((()=>p||a()),[p]),[A,P]=i(E),[k,q]=i(!1);let L=I;S&&I.length&&(L=`${I}${A?"":`${S}`}`),N&&(L="");const B=Boolean(_);return e.createElement(f,{className:n},m&&e.createElement(h,{htmlFor:O,forwardedAs:"label",disabled:s},m),e.createElement(y,{focused:A,hasError:d,styleOverride:j},e.createElement(x,u({id:O,disabled:s,ref:e=>{"function"==typeof r?r(e):r&&(r.current=e),e&&A&&!k&&(e.select(),q(!0))},onFocus:e=>{v?.(e),P(!0),q(!1)},onBlur:e=>{w?.(e),P(!1)},value:L,hasSuffix:B},C)),B&&e.createElement(b,{hasLabel:Boolean(m),forwardedAs:"span",size:l.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>P(!0)},_)),c&&e.createElement(g,{hasError:d},c))}));o.string,o.bool,o.bool,o.string,o.string,o.func,o.func.isRequired,o.func,o.node,o.string,o.string,o.bool,o.oneOfType([o.object,o.array]),w.displayName="Input";export{x as BaseInput,w as Input};
