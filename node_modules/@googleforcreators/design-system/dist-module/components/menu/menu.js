/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useRef as t,useCallback as r,useEffect as o}from"@googleforcreators/react";import"prop-types";import{MenuContainer as n}from"./components.js";import s from"./useDropDownMenu.js";import i from"./list/emptyList.js";import l from"./list/listGroupings.js";const Menu=a=>{let{dropDownHeight:u,emptyText:m,menuStylesOverride:p,hasMenuRole:c,handleReturnToParent:d,isMenuFocused:f=!0,isRTL:h,options:g=[],listId:I,onMenuItemClick:M,onDismissMenu:T,renderItem:R,activeValue:v,menuAriaLabel:y,parentId:b,isAbsolute:D=!1}=a;const L=t(),x=t([]),j=r(((e,t)=>{let{value:r}=t;return M(e,r)}),[M]),{focusedIndex:w,listLength:A}=s({activeValue:v,handleMenuItemSelect:j,isRTL:h,options:g,listRef:L,onDismissMenu:T,handleReturnToParent:d});return o((()=>{const e=L?.current;if(!e||null===w||!f)return;if(-1===w)return void e.scrollTo(0,0);const t=x.current[w];t&&(t.focus(),e.scrollTo?.(0,t.offsetTop-e.clientHeight/2))}),[w,f]),e.createElement(n,{id:I,dropDownHeight:u,styleOverride:p,ref:L,"aria-label":y,"aria-labelledby":b,"aria-expanded":"true",isAbsolute:D},g&&0!==g.length?e.createElement(l,{options:g,activeValue:v,listId:I,listLength:A,hasMenuRole:c,handleMenuItemSelect:j,renderItem:R,optionsRef:x}):e.createElement(i,{emptyText:m}))};export{Menu};
