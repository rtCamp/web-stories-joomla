/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{PLACEMENT as t}from"../constants.js";import{getXTransforms as e,getYTransforms as n}from"./getTransforms.js";function c(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,T=arguments.length>4?arguments[4]:void 0;const h=(i?i.left:c.left)-n,s=(i?i.right:c.right)+n,a=i?i.left+i.width/2:c.left+c.width/2;switch(e){case t.BOTTOM_START:case t.TOP_START:case t.LEFT:case t.LEFT_END:case t.LEFT_START:return T?s:h;case t.BOTTOM_END:case t.TOP_END:case t.RIGHT:case t.RIGHT_END:case t.RIGHT_START:return T?h:s;case t.BOTTOM:case t.TOP:return a;default:return 0}}function i(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2?arguments[2]:void 0;switch(e){case t.BOTTOM:case t.BOTTOM_START:case t.BOTTOM_END:case t.LEFT_END:case t.RIGHT_END:return c.top+c.height+n;case t.TOP:case t.TOP_START:case t.TOP_END:case t.LEFT_START:case t.RIGHT_START:return c.top-n;case t.RIGHT:case t.LEFT:return c.top+c.height/2;default:return 0}}function T(t){let{placement:T,spacing:h,anchor:s,dock:a,popup:r,isRTL:o,topOffset:g,ignoreMaxOffsetY:u,resetXOffset:l}=t;const d=s.current.getBoundingClientRect(),f=document.body.getBoundingClientRect(),O=r.current?.getBoundingClientRect(),R=a?.current?.getBoundingClientRect();O&&(O.height=Math.max(O.height,r.current?.scrollHeight),O.width=Math.max(O.width,r.current?.scrollWidth));const{height:p=0,width:_=0}=O||{},{x:E=0,y:m=0}=h||{},M=f.width-_-e(T)*_,w=i(T,m,d),B=f.height+f.y-p-n(T)*p;return{x:Math.max(0,Math.min(l&&O?.left<=0?o?_:0:c(T,E,d,R,o),M)),y:u?w:Math.max(g,Math.min(w,B)),width:d.width,height:d.height,popupLeft:O?.left,popupHeight:O?.height}}export{T as getOffset,c as getXOffset,i as getYOffset};
