/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{forwardRef as a,useMemo as t,useCallback as r}from"@googleforcreators/react";import"prop-types";import{InputContainer as l,Input as n,SearchDecoration as i,SearchIcon as o,ClearButton as c,ClearIcon as s,ChevronDecoration as d,ChevronIcon as p}from"./components.js";function m(){return m=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}var b=a(((a,b)=>{let{ariaClearLabel:h,clearId:u,disabled:f,handleClearInput:y=(()=>{}),handleTabClear:E,inputValue:g,isOpen:v,listId:O,className:x="",...C}=a;const I=t((()=>g.length>0&&v),[v,g]),j=t((()=>0===g.length&&!v),[v,g]),w=r((e=>{let{key:a}=e;"Tab"===a&&E?.()}),[E]);return e.createElement(l,{className:x},e.createElement(n,m({"aria-disabled":f,autocomplete:"off",disabled:f,ref:b,type:"search",value:g},O&&{role:"combobox","aria-expanded":v,"aria-controls":O,"aria-owns":O,"aria-autocomplete":"list"},C)),e.createElement(i,{activeSearch:j,"aria-hidden":!0,disabled:f},e.createElement(o,{id:u})),e.createElement(c,{type:"button",isVisible:I,tabIndex:0,"aria-label":I&&h,onClick:y,onKeyDown:w},e.createElement(s,{id:u,"data-testid":"clear-search-icon"})),e.createElement(d,{disabled:f,"aria-hidden":I,isVisible:!I&&g.length>0},e.createElement(p,{$isMenuOpen:v,"data-testid":"chevron-search-icon"})))}));export{b as default};
