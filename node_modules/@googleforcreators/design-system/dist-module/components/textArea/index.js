/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import"prop-types";import{forwardRef as r,useMemo as t,useState as o}from"@googleforcreators/react";import a,{css as n}from"styled-components";import{v4 as s}from"uuid";import{THEME_CONSTANTS as i}from"../../theme/constants/index.js";import{Text as l}from"../typography/text/index.js";import{focusCSS as d}from"../../theme/helpers/outline.js";import{scrollbarCSS as c}from"../../theme/helpers/scrollbar.js";import{expandPresetStyles as m}from"../../theme/helpers/expandPresetStyles.js";function p(){return p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},p.apply(this,arguments)}const h=a.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),f=a(l).attrs({size:i.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:r}=e;return r.colors.fg.tertiary})),u=a(l).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),y=a(l).attrs({size:i.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:r,theme:t}=e;return t.colors.fg[r?"negative":"tertiary"]})),g=a.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:r,hasError:t,theme:o,styleOverride:a}=e;return n(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],o.colors.border[t?"negativeNormal":"defaultNormal"],o.borders.radius.small,r&&!t&&n(["border-color:",";"],o.colors.border.defaultActive),d(o.colors.border.focus),a)})),x=a.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:r}=e;return n(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],r.colors.fg.primary,c,m({preset:r.typography.presets.paragraph[i.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:r}),r.colors.fg.disable,r.colors.border.disable,r.colors.fg.primary,r.colors.fg.tertiary)})),b=a.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:r}=e;return r.colors.fg.tertiary})),E=r(((r,a)=>{let{className:n,disabled:i,hasError:l,hint:d,id:c,label:m,onBlur:E,onFocus:w,value:A,showCount:_=!1,maxLength:v,isIndeterminate:S=!1,containerStyleOverride:C="",...I}=r;const N=t((()=>c||s()),[c]),P=_&&v>0,[L,O]=o(!1),[T,j]=o(!1);let R=A;return S&&(R=""),e.createElement(h,{className:n},m&&e.createElement(u,{htmlFor:N,forwardedAs:"label",disabled:i},m),e.createElement(g,{focused:L,hasError:l,styleOverride:C},e.createElement(x,p({id:N,disabled:i,ref:e=>{"function"==typeof a?a(e):a&&(a.current=e),e&&L&&!T&&(e.select(),j(!0))},onFocus:e=>{w?.(e),O(!0),j(!1)},onBlur:e=>{E?.(e),O(!1)},value:R,maxLength:v},I)),P&&e.createElement(b,null,e.createElement(f,null,`${A.length}/${v}`))),d&&e.createElement(y,{hasError:l},d))}));E.displayName="TextArea";export{E as TextArea};
