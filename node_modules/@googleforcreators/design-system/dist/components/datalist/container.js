/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react");require("prop-types");var t=require("styled-components"),n=require("uuid"),i=require("./searchInput.js"),o=require("./utils.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(e);const l=s(t).default.div.withConfig({displayName:"container__Container",componentId:"sc-n7ncmi-0"})(["position:relative;display:flex;flex-direction:row;flex-wrap:wrap;width:100%;min-width:120px;z-index:2;background-color:",";border-radius:",";padding:5px;margin-top:16px;"," "," ",";"],(e=>{let{theme:r}=e;return r.colors.bg.primary}),(e=>{let{theme:r}=e;return r.borders.radius.small}),(e=>{let{isInline:r}=e;return r&&t.css(["position:absolute;margin-top:0;padding:0;min-width:initial;width:initial;"])}),(e=>{let{theme:r,hasDropDownBorder:n}=e;return n&&t.css(["border:1px solid ",";"],r.colors.border.defaultNormal)}),(e=>{let{$containerStyleOverrides:r}=e;return r}));var u=r.forwardRef((function OptionsContainer(e,t){let{onClose:s,isOpen:u,getOptionsByQuery:d,hasSearch:c,renderContents:p,isInline:f,hasDropDownBorder:m=!1,containerStyleOverrides:h,title:g}=e;const w=r.useRef(),[y,v]=r.useState(""),[b,x]=r.useState(null),[C,O]=r.useState(!0),[q,S]=r.useState(0);r.useFocusOut(w,s,[s]);const I=r.useCallback((e=>{let{target:{value:r}}=e;return v(r)}),[]),D=r.useCallback((()=>{d(y).then(x)}),[d,y]);r.useEffect((()=>{d&&o.isKeywordFilterable(y)?D():x(null)}),[d,y,D]),r.useEffect((()=>{u&&t?.current?.focus()}),[u,t]);const E=r.useMemo((()=>`list-${n.v4()}`),[]);return a.default.createElement(l,{role:"dialog",title:g,ref:w,isInline:f,hasDropDownBorder:m,$containerStyleOverrides:h},c&&a.default.createElement(i,{ref:t,value:y,onChange:I,onClose:s,isExpanded:C,focusFontListFirstOption:()=>S((e=>e+1)),"aria-owns":E}),p({searchKeyword:y,setIsExpanded:O,trigger:q,queriedOptions:b,listId:E}))}));module.exports=u;
