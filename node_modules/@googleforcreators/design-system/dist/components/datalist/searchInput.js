/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react");require("prop-types");var r=require("styled-components"),o=require("@googleforcreators/i18n"),a=require("../../icons/magnifier.svg.js"),n=require("../../icons/cross.svg.js"),s=require("../../utils/noop.js"),i=require("../button/button.js"),l=require("../button/constants.js"),c=require("../../theme/helpers/expandPresetStyles.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=u(e),d=u(r);function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},h.apply(this,arguments)}const f=d.default.div.withConfig({displayName:"searchInput__SearchContainer",componentId:"sc-ewszoh-0"})(["position:relative;width:100%;"]),m=r.css(["position:absolute;display:flex;justify-content:center;align-items:center;top:50%;width:30px;padding:0;margin:0;transform:translateY(-50%);background-color:transparent;border:none;> svg{height:100%;width:auto;color:",";fill:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),g=d.default.div.withConfig({displayName:"searchInput__SearchIconContainer",componentId:"sc-ewszoh-1"})([""," left:0;height:28px;"],m),b=d.default(i.Button).attrs({variant:l.BUTTON_VARIANTS.ICON}).withConfig({displayName:"searchInput__ClearButton",componentId:"sc-ewszoh-2"})(["",";right:0;height:20.5px;opacity:0.4;"],m),w=d.default.input.attrs({type:"search",role:"combobox","aria-autocomplete":"list"}).withConfig({displayName:"searchInput__Input",componentId:"sc-ewszoh-3"})(["width:100%;padding:6px 20px 6px 30px;border-radius:",";background:",";border:1px solid ",";color:",";"," &::-ms-clear{display:none;}&::-webkit-search-decoration,&::-webkit-search-cancel-button,&::-webkit-search-results-button,&::-webkit-search-results-decoration{appearance:none;}&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultActive}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),c.expandTextPreset(((e,t)=>{let{paragraph:r}=e,{SMALL:o}=t;return r[o]})),(e=>{let{theme:t}=e;return t.colors.border.focus}));var y=t.forwardRef((function SearchInput(e,r){let{isExpanded:i,onClose:l,value:c,onChange:u,focusFontListFirstOption:d=s.noop,...m}=e;const y=t.useCallback((e=>{e.stopPropagation();const{key:t}=e;"Escape"===t?l():"ArrowDown"===t&&d()}),[l,d]);return p.default.createElement(f,null,p.default.createElement(w,h({ref:r,"aria-expanded":i,value:c,onKeyDown:y,placeholder:o.__("Search","web-stories"),onChange:u,"aria-label":o.__("Search","web-stories")},m)),p.default.createElement(g,null,p.default.createElement(a,null)),c.trim().length>0&&p.default.createElement(b,{onClick:()=>u({target:{value:""}})},p.default.createElement(n,null)))}));module.exports=y;
