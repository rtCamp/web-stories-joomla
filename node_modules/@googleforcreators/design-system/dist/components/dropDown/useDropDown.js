/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("@googleforcreators/react"),t=require("@googleforcreators/i18n"),o=require("../menu/utils.js"),r=require("../../utils/useLiveRegion.js");module.exports=function(s){let{options:n=[],selectedValue:u}=s;const[i,a]=e.useState(!1),l=r("assertive"),g=e.useDebouncedCallback(a,300,{leading:!0,trailing:!1}),d=e.useMemo((()=>({value:i,set:g})),[i,g]),f=e.useMemo((()=>n&&0!=n.length?o.getOptions(n):[]),[n]),c=e.useMemo((()=>u&&0!==f.length?f.flatMap((e=>e.group)).find((e=>e?.value?.toString().toLowerCase()===u.toString().toLowerCase())):null),[u,f]);return e.useEffect((()=>{if(d.value){const e=n.length?t.sprintf(
/* translators: %d number of options in dropdown */
t._n("%d result found, use left and right or up and down arrow keys to navigate.","%d results found, use left and right or up and down arrow keys to navigate.",n.length,"web-stories"),n.length):t.__("No results found.","web-stories");l(e)}}),[d.value,n.length,l]),{activeOption:c,normalizedOptions:f,isOpen:d}};
