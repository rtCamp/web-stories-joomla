/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=require("@googleforcreators/react"),o=require("styled-components"),a=require("uuid"),l=require("../../theme/constants/index.js"),s=require("../typography/text/index.js"),i=(require("../../utils/labelAccessibilityValidator.js"),require("../../theme/helpers/outline.js")),n=require("../../theme/helpers/expandPresetStyles.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=d(e),c=d(t),p=d(o);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},f.apply(this,arguments)}const h=p.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),m=p.default(s.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),g=p.default(s.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:r}=e;return r.colors.fg[t?"negative":"tertiary"]})),b=p.default(s.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),y=p.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:r,theme:a,styleOverride:l}=e;return o.css(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],a.colors.border[r?"negativeNormal":"defaultNormal"],a.borders.radius.small,t&&!r&&o.css(["border-color:",";"],a.colors.border.defaultActive),t&&o.css(["","{color:",";}"],b,a.colors.fg.primary),i.focusCSS(a.colors.border.focus),l)})),x=p.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:r}=e;return o.css(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&o.css(["padding-right:8px;"]),r.colors.fg.primary,n.expandPresetStyles({preset:{...r.typography.presets.paragraph[l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:r}),r.colors.fg.tertiary,r.colors.fg.disable,r.colors.border.disable,b,r.colors.fg.disable,r.colors.fg.primary)})),S=r.forwardRef(((e,t)=>{let{className:o,disabled:s,hasError:i,hint:n,id:d,label:c,onBlur:p,onFocus:S,hasFocus:v=!1,suffix:w,unit:E="",value:_="",isIndeterminate:q=!1,containerStyleOverride:N="",...I}=e;const T=r.useMemo((()=>d||a.v4()),[d]),[C,O]=r.useState(v),[j,A]=r.useState(!1);let P=_;E&&_.length&&(P=`${_}${C?"":`${E}`}`),q&&(P="");const k=Boolean(w);return u.default.createElement(h,{className:o},c&&u.default.createElement(m,{htmlFor:T,forwardedAs:"label",disabled:s},c),u.default.createElement(y,{focused:C,hasError:i,styleOverride:N},u.default.createElement(x,f({id:T,disabled:s,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&C&&!j&&(e.select(),A(!0))},onFocus:e=>{S?.(e),O(!0),A(!1)},onBlur:e=>{p?.(e),O(!1)},value:P,hasSuffix:k},I)),k&&u.default.createElement(b,{hasLabel:Boolean(c),forwardedAs:"span",size:l.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>O(!0)},w)),n&&u.default.createElement(g,{hasError:i},n))}));c.default.string,c.default.bool,c.default.bool,c.default.string,c.default.string,c.default.func,c.default.func.isRequired,c.default.func,c.default.node,c.default.string,c.default.string,c.default.bool,c.default.oneOfType([c.default.object,c.default.array]),S.displayName="Input",exports.BaseInput=x,exports.Input=S;
