/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants.js"),t=require("./getTransforms.js");function T(t){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,E=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const r=(s?s.left:E.left)-T,c=(s?s.right:E.right)+T,i=s?s.left+s.width/2:E.left+E.width/2;switch(t){case e.PLACEMENT.BOTTOM_START:case e.PLACEMENT.TOP_START:case e.PLACEMENT.LEFT:case e.PLACEMENT.LEFT_END:case e.PLACEMENT.LEFT_START:return n?c:r;case e.PLACEMENT.BOTTOM_END:case e.PLACEMENT.TOP_END:case e.PLACEMENT.RIGHT:case e.PLACEMENT.RIGHT_END:case e.PLACEMENT.RIGHT_START:return n?r:c;case e.PLACEMENT.BOTTOM:case e.PLACEMENT.TOP:return i;default:return 0}}function E(t){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,E=arguments.length>2?arguments[2]:void 0;switch(t){case e.PLACEMENT.BOTTOM:case e.PLACEMENT.BOTTOM_START:case e.PLACEMENT.BOTTOM_END:case e.PLACEMENT.LEFT_END:case e.PLACEMENT.RIGHT_END:return E.top+E.height+T;case e.PLACEMENT.TOP:case e.PLACEMENT.TOP_START:case e.PLACEMENT.TOP_END:case e.PLACEMENT.LEFT_START:case e.PLACEMENT.RIGHT_START:return E.top-T;case e.PLACEMENT.RIGHT:case e.PLACEMENT.LEFT:return E.top+E.height/2;default:return 0}}exports.getOffset=function(e){let{placement:s,spacing:n,anchor:r,dock:c,popup:i,isRTL:a,topOffset:h,ignoreMaxOffsetY:o,resetXOffset:M}=e;const g=r.current.getBoundingClientRect(),u=document.body.getBoundingClientRect(),A=i.current?.getBoundingClientRect(),L=c?.current?.getBoundingClientRect();A&&(A.height=Math.max(A.height,i.current?.scrollHeight),A.width=Math.max(A.width,i.current?.scrollWidth));const{height:N=0,width:P=0}=A||{},{x:f=0,y:l=0}=n||{},C=u.width-P-t.getXTransforms(s)*P,d=E(s,l,g),O=u.height+u.y-N-t.getYTransforms(s)*N;return{x:Math.max(0,Math.min(M&&A?.left<=0?a?P:0:T(s,f,g,L,a),C)),y:o?d:Math.max(h,Math.min(d,O)),width:g.width,height:g.height,popupLeft:A?.left,popupHeight:A?.height}},exports.getXOffset=T,exports.getYOffset=E;
