/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@googleforcreators/react"),n=require("prop-types"),a=require("styled-components"),r=require("react-transition-group"),i=require("uuid");require("../popup/index.js");var s=require("./snackbarMessage.js"),o=require("../../utils/noop.js"),c=require("../popup/constants.js"),l=require("../../utils/useLiveRegion.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=u(e),m=u(n),f=u(a);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(this,arguments)}const b=f.default.div.withConfig({displayName:"snackbarContainer__StyledContainer",componentId:"sc-7yig0q-0"})(["position:fixed;top:",";bottom:",";",";margin-bottom:33px;display:flex;flex-direction:column;align-items:",";width:100%;z-index:2147483647;pointer-events:none;"],(e=>{let{placement:t}=e;return 0===t.indexOf("top")?0:"inherit"}),(e=>{let{placement:t}=e;return 0===t.indexOf("bottom")?0:"inherit"}),(function(e){let{placement:t}=e;switch(t){case"top":case"bottom":return"\n      left: calc(50% + 4rem);\n      transform: translateX(-50%);\n      width: auto;\n    ";case"top-left":case"bottom-left":default:return"left: 60px;";case"top-right":case"bottom-right":return"right: 60px;"}}),(e=>{let{alignItems:t}=e;return t}));b.propTypes={alignItems:m.default.string},b.defaultProps={alignItems:"center"};const g=f.default.div.withConfig({displayName:"snackbarContainer__ChildContainer",componentId:"sc-7yig0q-1"})(["&.react-snackbar-alert__snackbar-container-enter{max-height:0px;opacity:0;transition:all 300ms ease-out;}&.react-snackbar-alert__snackbar-container-enter-active{opacity:1;max-height:100px;transition:all 300ms ease-out;}&.react-snackbar-alert__snackbar-container-exit{opacity:1;transition:all 300ms ease-out;}&.react-snackbar-alert__snackbar-container-exit-active{opacity:0;transition:all 300ms ease-out;}"]);exports.SnackbarContainer=e=>{let{component:n=s.SnackbarMessage,notifications:a=[],onRemove:u=o.noop,placement:m=c.PLACEMENT.BOTTOM,max:f=10}=e;const h=l("assertive"),v=t.useRef(new Set),x=t.useMemo((()=>a.map((()=>i.v4()))),[a]),y=0===m.indexOf("top")?[...a].reverse():a,k=t.useCallback((e=>()=>{u(e),e.onDismiss?.()}),[u]);t.useEffect((()=>{"number"==typeof f&&a.length>f&&setTimeout((()=>{u(a.slice(0,a.length-f))}),300)}),[f,a,u]),t.useEffect((()=>{a.forEach((e=>{if(!v.current.has(e)){const t=`${e.message} ${e.actionHelpText||""}`.trim();h(t),v.current.add(e)}}))}),[a,h]);const _=t.useRef();return p.default.createElement(b,{placement:m},p.default.createElement(r.TransitionGroup,null,y.map(((e,t)=>{const{actionLabel:a,dismissible:i,message:s,onAction:o,preventActionDismiss:c,preventAutoDismiss:l,timeout:u,...f}=e;return p.default.createElement(r.CSSTransition,{in:!0,key:e.id||x[t],timeout:300,unmountOnExit:!0,nodeRef:_,classNames:"react-snackbar-alert__snackbar-container"},p.default.createElement(g,{ref:_,placement:m},p.default.createElement(n,d({},f,{"aria-hidden":!0,placement:m,onDismiss:k(e),onAction:o,actionLabel:a,message:s,showCloseButton:i,removeMessageTimeInterval:u,isPreventAutoDismiss:l,isPreventActionDismiss:c}))))}))))};
