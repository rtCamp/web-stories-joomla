/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=require("@googleforcreators/react"),o=require("polished"),n=require("styled-components"),s=require("@googleforcreators/i18n"),a=require("../../theme/constants/index.js"),i=require("./constants.js"),l=require("../typography/text/index.js"),c=require("../../utils/noop.js"),u=require("../../icons/checkmark_small.svg.js"),d=require("../../icons/exclamation_outline.svg.js"),m=require("../../icons/cross.svg.js"),p=require("../button/button.js"),f=require("../../theme/helpers/outline.js");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=h(e),b=h(t),_=h(n);function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},E.apply(this,arguments)}const v=_.default.div.withConfig({displayName:"snackbarMessage__MessageContainer",componentId:"sc-fjv091-0"})(["display:flex;align-items:center;justify-content:space-between;min-height:48px;padding:10px 16px;margin-top:20px;background-color:",";color:",";border:",";border-radius:",";z-index:",";pointer-events:auto;"],(e=>{let{theme:t}=e;return t.colors.inverted.bg.primary}),(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary}),(e=>{let{theme:t}=e;return`1px solid ${o.rgba(t.colors.standard.white,.24)}`}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{customZIndex:t}=e;return t||i.DEFAULT_MESSAGE_Z_INDEX}));v.propTypes={customZIndex:b.default.number};const T=_.default(l.Text).withConfig({displayName:"snackbarMessage__Message",componentId:"sc-fjv091-1"})(["color:",";max-width:430px;padding-right:",";"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary}),(e=>{let{hasAction:t,hasThumbnail:r}=e;return r?"16px":t?"52px":"0px"})),x=_.default.div.withConfig({displayName:"snackbarMessage__ActionContainer",componentId:"sc-fjv091-2"})(["display:flex;align-items:center;justify-content:flex-end;"]),S=_.default.div.withConfig({displayName:"snackbarMessage__ThumbnailWrapper",componentId:"sc-fjv091-3"})(["position:relative;margin-left:16px;margin-right:","px;"],(e=>{let{hasAction:t}=e;return t?16:0})),A=_.default.img.withConfig({displayName:"snackbarMessage__Thumbnail",componentId:"sc-fjv091-4"})(["max-height:45px;max-width:45px;min-height:","px;min-width:","px;background-color:",";border-radius:",";",";"],30,30,(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,status:r}=e;return r===i.THUMBNAIL_STATUS.SUCCESS?n.css(["border:1px solid ",";"],t.colors.green[20]):r===i.THUMBNAIL_STATUS.ERROR?n.css(["border:1px solid ",";"],t.colors.red[20]):void 0})),M=_.default.div.withConfig({displayName:"snackbarMessage__ThumbnailIcon",componentId:"sc-fjv091-5"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);",";svg{width:100%;height:auto;}"],(e=>{let{theme:t,status:r}=e;return r===i.THUMBNAIL_STATUS.SUCCESS?n.css(["width:30px;color:",";"],t.colors.fg.positive):r===i.THUMBNAIL_STATUS.ERROR?n.css(["width:20px;color:",";"],t.colors.fg.negative):void 0})),y=_.default(p.Button).withConfig({displayName:"snackbarMessage__ActionButton",componentId:"sc-fjv091-6"})(["align-self:flex-end;min-width:1px;height:2em;padding:0;color:",";font-weight:",";"," &:hover,&:active{color:",";}"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.linkNormal}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{theme:t}=e;return f.focusableOutlineCSS(t.colors.border.focus,t.colors.inverted.bg.primary)}),(e=>{let{theme:t}=e;return t.colors.inverted.fg.linkHover})),I=_.default(p.Button).withConfig({displayName:"snackbarMessage__CloseButton",componentId:"sc-fjv091-7"})(["height:2em;padding:0;margin-left:16px;color:",";"," svg{height:32px;}"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary}),(e=>{let{theme:t}=e;return f.focusableOutlineCSS(t.colors.border.focus,t.colors.inverted.bg.primary)})),SnackbarMessage=e=>{let{"aria-label":t,actionLabel:o,onAction:n=c.noop,onDismiss:l=c.noop,isPreventAutoDismiss:p,isPreventActionDismiss:f,thumbnail:h,message:b,removeMessageTimeInterval:_,showCloseButton:C,placement:j="bottom",actionHelpText:w,...N}=e;const R=r.useRef();R.current=p?c.noop:l;const U=r.useRef("number"==typeof _&&_<=i.AUTO_REMOVE_MESSAGE_TIME_INTERVAL_MAX&&_>=i.AUTO_REMOVE_MESSAGE_TIME_INTERVAL_MIN?_:i.AUTO_REMOVE_MESSAGE_TIME_INTERVAL_MAX);r.useEffect((()=>{if(!R.current)return c.noop;const e=setTimeout((()=>R.current()),U.current);return()=>clearTimeout(e)}),[]);const k=r.useCallback((e=>{n(e),!f&&l()}),[n,l,f]),O=Boolean(o),q=Boolean(o);return g.default.createElement(v,E({role:"alert",hasAction:O,placement:j},N),g.default.createElement(T,{"aria-label":t,size:a.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,hasAction:O,hasThumbnail:q},b),h&&g.default.createElement(S,{hasAction:O},g.default.createElement(A,{src:h.src,alt:h.alt,status:h.status}),g.default.createElement(M,{status:h.status},h.status===i.THUMBNAIL_STATUS.SUCCESS&&g.default.createElement(u,null),h.status===i.THUMBNAIL_STATUS.ERROR&&g.default.createElement(d,null))),(o||C)&&g.default.createElement(x,null,o&&g.default.createElement(y,{onClick:k},o),C&&g.default.createElement(I,{onClick:l,"aria-label":s.__("Close","web-stories"),tabIndex:-1},g.default.createElement(m,{"aria-hidden":!0}))))};SnackbarMessage.defaultProps={showCloseButton:!0},exports.SnackbarMessage=SnackbarMessage;
