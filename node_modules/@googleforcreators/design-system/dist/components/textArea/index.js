/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");require("prop-types");var r=require("@googleforcreators/react"),t=require("styled-components"),o=require("uuid"),a=require("../../theme/constants/index.js"),s=require("../typography/text/index.js"),l=require("../../theme/helpers/outline.js"),n=require("../../theme/helpers/scrollbar.js"),i=require("../../theme/helpers/expandPresetStyles.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=d(e),u=d(t);function p(){return p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},p.apply(this,arguments)}const f=u.default.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),m=u.default(s.Text).attrs({size:a.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:r}=e;return r.colors.fg.tertiary})),h=u.default(s.Text).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),y=u.default(s.Text).attrs({size:a.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:r,theme:t}=e;return t.colors.fg[r?"negative":"tertiary"]})),g=u.default.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:r,hasError:o,theme:a,styleOverride:s}=e;return t.css(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],a.colors.border[o?"negativeNormal":"defaultNormal"],a.borders.radius.small,r&&!o&&t.css(["border-color:",";"],a.colors.border.defaultActive),l.focusCSS(a.colors.border.focus),s)})),x=u.default.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:r}=e;return t.css(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],r.colors.fg.primary,n.scrollbarCSS,i.expandPresetStyles({preset:r.typography.presets.paragraph[a.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:r}),r.colors.fg.disable,r.colors.border.disable,r.colors.fg.primary,r.colors.fg.tertiary)})),b=u.default.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:r}=e;return r.colors.fg.tertiary})),S=r.forwardRef(((e,t)=>{let{className:a,disabled:s,hasError:l,hint:n,id:i,label:d,onBlur:u,onFocus:S,value:E,showCount:_=!1,maxLength:v,isIndeterminate:A=!1,containerStyleOverride:T="",...w}=e;const N=r.useMemo((()=>i||o.v4()),[i]),C=_&&v>0,[O,P]=r.useState(!1),[I,j]=r.useState(!1);let q=E;return A&&(q=""),c.default.createElement(f,{className:a},d&&c.default.createElement(h,{htmlFor:N,forwardedAs:"label",disabled:s},d),c.default.createElement(g,{focused:O,hasError:l,styleOverride:T},c.default.createElement(x,p({id:N,disabled:s,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&O&&!I&&(e.select(),j(!0))},onFocus:e=>{S?.(e),P(!0),j(!1)},onBlur:e=>{u?.(e),P(!1)},value:q,maxLength:v},w)),C&&c.default.createElement(b,null,c.default.createElement(m,null,`${E.length}/${v}`))),n&&c.default.createElement(y,{hasError:l},n))}));S.displayName="TextArea",exports.TextArea=S;
