/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import t from"styled-components";import"prop-types";import{useRef as o}from"@googleforcreators/react";import{getMediaSizePositionProps as r}from"@googleforcreators/media";import"@googleforcreators/elements";import i from"../media/display.js";import{videoWithScale as a,getBackgroundStyle as l}from"../video/util.js";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},n.apply(this,arguments)}const s=t.video.withConfig({displayName:"display__Video",componentId:"sc-inr96z-0"})(["position:absolute;max-width:initial;max-height:initial;",""],a),p=t.img.withConfig({displayName:"display__Image",componentId:"sc-inr96z-1"})(["position:absolute;max-height:initial;object-fit:contain;width:",";left:",";top:",";max-width:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{offsetX:t}=e;return-t+"px"}),(e=>{let{offsetY:t}=e;return-t+"px"}),(e=>{let{isBackground:t}=e;return t?"initial":null}));function VideoDisplay(t){let{previewMode:a,box:{width:m,height:c},element:d}=t;const{id:f,poster:u,resource:g,isBackground:h,scale:y,focalX:w,focalY:v}=d,x=o();let b={};if(h){const e=l();b={...b,...e}}const j=r(g,m,c,y,w,v);return j.crossOrigin="anonymous",e.createElement(i,{element:d,mediaRef:x,showPlaceholder:!0,previewMode:a},a?(u||g.poster)&&e.createElement(p,n({src:u||g.poster,alt:d.alt||g.alt,style:b},j,{ref:x})):e.createElement(s,n({id:`video-${f}`,poster:u||g.poster,style:b},j,{loop:!0,autoPlay:!0,muted:!0,preload:"all",ref:x,"data-testid":"videoElement","data-leaf-element":"true"}),g.output.src&&e.createElement("source",{src:g.output.src,type:g.output.mimeType})))}export{VideoDisplay as default};
