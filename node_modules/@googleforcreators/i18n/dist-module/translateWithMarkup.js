/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{Fragment as t,cloneElement as r,createElement as n}from"@googleforcreators/react";import"prop-types";const o=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{childNodes:o,localName:l,nodeType:a,textContent:s}=e;if(Node.TEXT_NODE===a)return s;const c=e.hasChildNodes()?[...o].map((e=>i(e,t))):null;return l in t?r(t[l],null,c):n(l,null,c)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];do{r.push(l(e,t)),e=e.nextSibling}while(null!==e);return r}function TranslateWithMarkup(r){let{mapping:n={},children:l}=r;n=Object.fromEntries(Object.entries(n).map((e=>{let[t,r]=e;return[t.toLowerCase(),r]})));const a=Object.keys(n).filter((e=>o.includes(e))).join(" ");if(a.length>0)throw new Error(`Found disallowed void elements in TranslateWithMarkup map: ${a}`);const s=(new DOMParser).parseFromString(l,"text/html").body.firstChild;return s?i(s,n).map(((r,n)=>e.createElement(t,{key:n},r))):[]}export{TranslateWithMarkup as default,l as transformNode};
