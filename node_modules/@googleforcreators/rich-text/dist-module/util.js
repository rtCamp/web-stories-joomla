/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{SelectionState as e,EditorState as t}from"draft-js";import{filterEditorState as r}from"draftjs-filters";import n from"./formatters/weight.js";import s from"./formatters/italic.js";import o from"./formatters/underline.js";import c from"./formatters/uppercase.js";function a(e,t){return t.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?r({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e}const f=e=>(r,a)=>{const f=function(e,r){switch(e){case"bold":return n.setters.toggleBold(r);case"italic":return s.setters.toggleItalic(r);case"underline":return o.setters.toggleUnderline(r);case"uppercase":return c.setters.toggleUppercase(r);case"selectall":return t.forceSelection(r,l(r.getCurrentContent()));default:return null}}(r,a);return f?(e(f),"handled"):"not-handled"};function l(t){const r=t.getFirstBlock(),n=t.getLastBlock();return new e({anchorKey:r.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}function i(t,r){const n=t.getBlocksAsArray();let s=r;for(let t=0;t<n.length&&s>=0;t++){const r=n[t],o=r.getLength();if(s<=o){return new e({anchorKey:r.getKey(),anchorOffset:s,focusKey:r.getKey(),focusOffset:s})}s-=o+1}return null}export{a as getFilteredState,f as getHandleKeyCommandFromState,l as getSelectionForAll,i as getSelectionForOffset};
