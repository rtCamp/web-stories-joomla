/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

function e(e,t,n){const o=e.ownerDocument||e.document,c=o.defaultView||o.parentWindow;if(void 0!==c.getSelection){let r;if(t&&n)if(o.caretPositionFromPoint){const e=document.caretPositionFromPoint(t,n);e&&(r=document.createRange(),r.setStart(e.offsetNode,e.offset))}else if(o.caretRangeFromPoint){const e=document.querySelectorAll("[data-fix-caret]");for(const t of e)t.style.webkitUserSelect="auto";r=document.caretRangeFromPoint(t,n);for(const t of e)t.style.webkitUserSelect="none"}if(!r){c.getSelection().rangeCount>0&&(r=c.getSelection().getRangeAt(0))}if(r){const t=r.cloneRange();return t.selectNodeContents(e),t.setEnd(r.endContainer,r.endOffset),t.toString().length<=e.textContent.length?t.toString().length:0}}const r=o.selection;if(r&&"Control"!==r.type){const c=r.createRange();t&&n&&c.moveToPoint(t,n);const i=o.body.createTextRange();return i.moveToElementText(e),i.setEndPoint("EndToEnd",c),i.text.length}return 0}export{e as default};
