/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@googleforcreators/react"),t=require("draft-js");exports.fauxStylesToCSS=function(e,t){if(!e.includes("CUSTOM-FAUX"))return null;const r={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(r.color=`var(--faux-selection-color, ${t.color})`),r},exports.useFauxSelection=function(r,o){const[n,l]=e.useState(null);e.useEffect((()=>{if(!r)return void l(null);const e=r.getCurrentContent(),i=r.getSelection(),c=i?.getHasFocus(),s=(a=i,!((u=n)&&a&&u.serialize().replace(/has focus: .*$/i,"")===a.serialize().replace(/has focus: .*$/i,"")));var u,a;const f=Boolean(n);if(!c&&!f){const n=t.Modifier.applyInlineStyle(e,i,"CUSTOM-FAUX"),c=t.EditorState.push(r,n,"change-inline-style");o(c),l(i)}c&&s&&f&&(o((e=>{try{const r=t.Modifier.removeInlineStyle(e.getCurrentContent(),n,"CUSTOM-FAUX"),o=t.EditorState.push(e,r,"change-inline-style");return t.EditorState.forceSelection(o,e.getSelection())}catch(t){return e}})),l(null))}),[n,r,o])};
