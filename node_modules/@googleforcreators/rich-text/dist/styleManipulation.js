/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("draft-js"),t=require("./customConstants.js"),n=require("./draftUtils.js");function r(e,n){const r=e.toArray().map((e=>e.style??e)),i=e=>e&&e.startsWith(n);return r.some(i)?r.find(i):t.NONE}function i(e,t){const i=e.getSelection(),l=n.getAllStyleSetsInSelection(e);if(i.isCollapsed()||0===l.length)return[r(e.getCurrentInlineStyle(),t)];const o=new Set;return l.forEach((e=>o.add(r(e,t)))),[...o]}function l(t,n){return e.EditorState.push(t,n,"change-inline-style")}exports.getPrefixStyleForCharacter=r,exports.getPrefixStylesInSelection=i,exports.togglePrefixStyle=function(n,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n.getSelection().isCollapsed()){let i=n.getCurrentInlineStyle();const l=r(i,o);l!==t.NONE&&(i=i.remove(l));if(s?s([l]):l===t.NONE){const e=u?u([l]):o;i=i.add(e)}return e.EditorState.setInlineStyleOverride(n,i)}const c=i(n,o),d=c.filter((e=>e!==t.NONE)),a=d.reduce(((t,r)=>e.Modifier.removeInlineStyle(t,n.getSelection(),r)),n.getCurrentContent()),f=s?s(c):c.includes(t.NONE);if(!f)return l(n,a);const S=u?u(c):o,g=e.Modifier.applyInlineStyle(a,n.getSelection(),S);return l(n,g)};
