/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("@googleforcreators/react"),r=require("draft-js"),t=require("./formatters/index.js");module.exports=function(n,u){const c=e.useRef(null),o=e.useRef(null);e.useEffect((()=>{c.current=n,n?n.getSelection().hasFocus&&(o.current=n.getSelection()):o.current=null}),[n]);const s=e.useCallback((function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=c.current,s=o.current,l=t?r.EditorState.forceSelection(n,s):n,a=e(l);u(a)}),[u]),l=e.useCallback((e=>`${e}InSelection`),[]),a=e.useCallback(((e,r)=>function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return s((r=>e(r,...n)),r)}),[s]);return e.useMemo((()=>t.reduce(((e,r)=>{let{setters:t,autoFocus:n}=r;return{...e,...Object.fromEntries(Object.entries(t).map((e=>{let[r,t]=e;return[l(r),a(t,n)]})))}}),{})),[l,a])};
