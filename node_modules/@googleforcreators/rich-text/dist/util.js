/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("draft-js"),t=require("draftjs-filters"),r=require("./formatters/weight.js"),n=require("./formatters/italic.js"),s=require("./formatters/underline.js"),o=require("./formatters/uppercase.js");function a(t){const r=t.getFirstBlock(),n=t.getLastBlock();return new e.SelectionState({anchorKey:r.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}exports.getFilteredState=function(e,r){return r.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?t.filterEditorState({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e},exports.getHandleKeyCommandFromState=t=>(l,c)=>{const i=function(t,l){switch(t){case"bold":return r.default.setters.toggleBold(l);case"italic":return n.setters.toggleItalic(l);case"underline":return s.setters.toggleUnderline(l);case"uppercase":return o.setters.toggleUppercase(l);case"selectall":return e.EditorState.forceSelection(l,a(l.getCurrentContent()));default:return null}}(l,c);return i?(t(i),"handled"):"not-handled"},exports.getSelectionForAll=a,exports.getSelectionForOffset=function(t,r){const n=t.getBlocksAsArray();let s=r;for(let t=0;t<n.length&&s>=0;t++){const r=n[t],o=r.getLength();if(s<=o){return new e.SelectionState({anchorKey:r.getKey(),anchorOffset:s,focusKey:r.getKey(),focusOffset:s})}s-=o+1}return null};
