/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useState as t,useCallback as r,useMemo as o}from"@googleforcreators/react";import"prop-types";import"../../constants/fonts.js";import"../../constants/multipleValue.js";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../story/context.js";import"@googleforcreators/migration";import"@googleforcreators/templates";import"../config/context.js";import"../api/context.js";import"../history/historyProvider.js";import"../history/context.js";import"../story/actions/useSaveStory.js";import"clone-deep";import"../story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../story/storyTriggers/storyTriggersProvider.js";import"../story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../story/storyTriggers/storyEvents/onPageAddedRegister.js";import s from"../story/useStory.js";import i from"./context.js";import{STATES as m}from"./states.js";function HighlightsProvider(n){let{children:l}=n;const[g,a]=t({}),{setSelectedElementsById:p,setCurrentPage:c}=s((e=>{let{actions:t}=e;return{setSelectedElementsById:t.setSelectedElementsById,setCurrentPage:t.setCurrentPage}})),d=r((e=>{let{elementId:t,elements:r,pageId:o}=e;o&&c({pageId:o}),Array.isArray(r)?p({elementIds:r.map((e=>{let{id:t}=e;return t}))}):t&&p({elementIds:[t]})}),[c,p]),y=r((e=>{let{elements:t,elementId:r,pageId:o,highlight:s}=e;if((t||r||o)&&d({elements:t,elementId:r,pageId:o}),s){const{tab:e,section:t,...r}=m[s];a({[s]:{...r,showEffect:!0},tab:e,section:t})}}),[d]),f=r((()=>a({})),[a]),u=r((e=>a((t=>({[e]:{...t[e],showEffect:!1}})))),[]),h=o((()=>({setHighlights:y,onFocusOut:f,cancelEffect:u,...g})),[u,f,y,g]);return e.createElement(i.Provider,{value:h},l)}export{HighlightsProvider as default};
