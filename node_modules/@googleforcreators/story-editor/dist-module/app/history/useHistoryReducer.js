/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{useReducer as e,useCallback as t}from"@googleforcreators/react";import r,{EMPTY_STATE as o,REPLAY as n,CLEAR_HISTORY as u,SET_CURRENT_STATE as s}from"./reducer.js";function f(f){const[i,a]=e(r(f),{...o}),{entries:y,offset:c,requestedState:d,versionNumber:l}=i,p=y.length,m=t((e=>{const t=c+e;return!(t<0||t>p-1)&&(a({type:n,payload:t}),!0)}),[a,c,p]),g=t((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return m("number"==typeof e?e:1)}),[m]),h=t((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return m("number"==typeof e?-e:-1)}),[m]),b=t((()=>a({type:u})),[a]);return{requestedState:d,stateToHistory:t((e=>{a({type:s,payload:e})}),[a]),clearHistory:b,currentEntry:y?.[c],offset:c,historyLength:p,versionNumber:l,undo:g,redo:h}}export{f as default};
