/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{useCallback as o}from"@googleforcreators/react";import{createNewElement as t}from"@googleforcreators/elements";import{ZOOM_SETTING as r}from"../../constants/index.js";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"react";import"prop-types";import"../../app/story/context.js";import"@googleforcreators/migration";import"@googleforcreators/templates";import"../../app/config/context.js";import"../../app/api/context.js";import"../../app/history/historyProvider.js";import"../../app/history/context.js";import"../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../app/story/storyTriggers/storyTriggersProvider.js";import"../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import e from"../../app/story/useStory.js";import s from"../../app/layout/useLayout.js";import"../../app/layout/context.js";import"../../app/layout/useZoomSetting.js";import i from"./useFocusCanvas.js";import p from"./utils/getElementProperties.js";function m(){const{addElement:m}=e((o=>{let{actions:t}=o;return{addElement:t.addElement}})),{setZoomSetting:a}=s((o=>{let{actions:{setZoomSetting:t}}=o;return{setZoomSetting:t}})),n=i();return o(((o,e)=>{a(r.FIT);const s=function(o,r){return t(o,p(o,r))}(o,e),{id:i,resource:c}=s;return m({element:s}),"video"===o&&c?.src&&!c.isPlaceholder&&setTimeout((()=>{const o=document.getElementById(`video-${i}`);o&&o.play().catch((()=>{}))})),n(),s}),[m,n,a])}export{m as default};
