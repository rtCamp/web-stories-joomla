/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import t from"react";import"prop-types";import r,{css as o}from"styled-components";import{Button as e,BUTTON_VARIANTS as s,BUTTON_SIZES as i,BUTTON_TYPES as p,themeHelpers as a,Icons as n}from"@googleforcreators/design-system";import{useState as m}from"@googleforcreators/react";import{__}from"@googleforcreators/i18n";import"@googleforcreators/dom";import{getVisibleThumbnails as l}from"../../utils/getVisibleThumbnails.js";import"../../../../types.js";import"../../../footer/pagepreview/index.js";import"../../../thumbnail/constants.js";import"../../../thumbnail/styles.js";import"@googleforcreators/elements";import"@googleforcreators/templates";import"../../../../app/config/context.js";import"../../../../app/api/context.js";import"@googleforcreators/transform";import"../../../dropTargets/provider.js";import"../../../dropTargets/context.js";import"../../../../app/history/historyProvider.js";import"../../../../app/history/context.js";import"@googleforcreators/fonts";import"../../../../constants/fonts.js";import"../../../../constants/multipleValue.js";import"../../../../app/font/context.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"../../../../app/story/context.js";import"@googleforcreators/migration";import"../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import"../../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../../utils/generateBlurhash.worker.js";import"../../../../app/media/media3p/providerConfiguration.js";import"../../../../app/media/utils/useFFmpeg.js";import"../../../../app/media/media3p/api/context.js";import"../../../../app/media/local/constants.js";import"../../../../app/media/media3p/providerReducer.js";import"../../../../app/media/context.js";import"sat";import"@googleforcreators/units";import"../../../../app/layout/context.js";import"../../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../../library/panes/text/textPresets.js";import"../../../../app/canvas/context.js";import"../../../../app/currentUser/context.js";import"../../../../app/helpCenter/provider.js";import"../../../../app/helpCenter/context.js";import"../../../helpCenter/constants.js";import"../../../../app/rightClickMenu/context.js";import{StyledOverflowThumbnail as c}from"../../../checklistCard/styles.js";import{MAX_THUMBNAILS_DISPLAYED as g}from"../../../checklistCard/constants.js";function d(){return d=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t},d.apply(this,arguments)}const u=r.div.withConfig({displayName:"thumbnailWrapper__Wrapper",componentId:"sc-3oy0ss-0"})(["grid-area:thumbnail;transition:height ease-in-out 300ms;",""],(t=>{let{$isMultiple:r}=t;return r&&o(["display:grid;grid-gap:8px;grid-template-columns:repeat(4,52px);grid-template-rows:auto;"])})),f=r(e).attrs({variant:s.RECTANGLE,size:i.SMALL,type:p.TERTIARY}).withConfig({displayName:"thumbnailWrapper__StyledButton",componentId:"sc-3oy0ss-1"})(["grid-column:span 4;justify-content:center;height:32px;width:100%;margin:4px 0;",";"],(t=>{let{theme:r}=t;return a.focusableOutlineCSS(r.colors.border.focus,r.colors.bg.tertiary)})),y=r.div.withConfig({displayName:"thumbnailWrapper__IconContainer",componentId:"sc-3oy0ss-2"})(["height:18px;width:20px;svg{transform:",";transition:transform ease-in-out 300ms;}"],(t=>{let{$isExpanded:r}=t;return r&&"rotate(-180deg)"})),ToggleButton=r=>{let{children:o,isExpanded:e,...s}=r;return t.createElement(f,d({"aria-pressed":e},s),__(o||e?"Collapse":"Expand","web-stories"),t.createElement(y,{$isExpanded:e},t.createElement(n.ChevronDown,null)))},ThumbnailWrapper=r=>{let{children:o,...e}=r;const[s,i]=m(!1),p=Array.isArray(o)?o.length:1,a=p>0&&p>g+1,n=s||p<=1?o:l(o),f=()=>i((t=>!t));return t.createElement(u,d({$isMultiple:p>1},e),n,a&&t.createElement(t.Fragment,null,!s&&t.createElement(c,{overflowCount:p-g,onClick:f}),t.createElement(ToggleButton,{isExpanded:s,onClick:f})))};export{ThumbnailWrapper as default};
