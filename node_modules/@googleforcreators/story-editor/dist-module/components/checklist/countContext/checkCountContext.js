/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{createContext as t,useState as r,useContext as o,useCallback as n,useEffect as i}from"@googleforcreators/react";import"prop-types";import{ISSUE_TYPES as s}from"../constants.js";const c=t(null),u=t(null),l={[s.PRIORITY]:{},[s.DESIGN]:{},[s.ACCESSIBILITY]:{}};function ChecklistCountProvider(t){let{hasChecklist:o,children:n}=t;const i=r({...l,hasChecklist:o});return e.createElement(c.Provider,{value:i},n)}function ChecklistCategoryProvider(t){let{children:r,category:i}=t;const s=o(c)?.[1];if(!s)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const l=n((e=>s((t=>({...t,[i]:{...t[i],...e}})))),[i,s]);return e.createElement(u.Provider,{value:l},r)}function C(e,t){const r=o(u);if(!r)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");i((()=>r({[e]:t})),[e,r,t])}function a(){const e=o(c)?.[0];if(!e)throw new Error("Cannot use `useIsChecklistEmpty` outside of `ChecklistCountProvider`");return Object.values(e).map((e=>Object.values(e))).flatMap((e=>e)).filter((e=>e)).length>0}function h(e){const t=o(c)?.[0];if(!t)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(t[e]||{}).filter((e=>e)).length}function f(){const e=o(c)?.[0];if(!e)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist:t}=e;return t}export{u as CategoryContext,ChecklistCategoryProvider,ChecklistCountProvider,c as CountContext,h as useCategoryCount,f as useHasChecklist,a as useIsChecklistEmpty,C as useRegisterCheck};
