/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import t from"react";import{CSSTransition as e}from"react-transition-group";import r from"styled-components";import{__}from"@googleforcreators/i18n";import{useRef as o}from"@googleforcreators/react";import"@googleforcreators/transform";import"../../dropTargets/provider.js";import"../../dropTargets/context.js";import"../../../app/history/historyProvider.js";import"../../../app/history/context.js";import"prop-types";import"@googleforcreators/templates";import"../../../app/config/context.js";import"../../../app/api/context.js";import"@googleforcreators/fonts";import"@googleforcreators/dom";import{CAROUSEL_TRANSITION_DURATION as a,CAROUSEL_STATE as s}from"../../../constants/index.js";import"../../../app/font/context.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../app/story/context.js";import"@googleforcreators/migration";import"../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import"../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../utils/generateBlurhash.worker.js";import"@googleforcreators/design-system";import"../../../app/media/media3p/providerConfiguration.js";import"../../../app/media/utils/useFFmpeg.js";import"../../../app/media/media3p/api/context.js";import"../../../app/media/local/constants.js";import"../../../app/media/media3p/providerReducer.js";import"../../../app/media/context.js";import"sat";import"@googleforcreators/units";import p from"../../../app/layout/useLayout.js";import"../../../app/layout/context.js";import"../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../library/panes/text/textPresets.js";import"../../../app/canvas/context.js";import"../../../app/currentUser/context.js";import"../../../app/helpCenter/provider.js";import"../../../app/helpCenter/context.js";import"../../helpCenter/constants.js";import"../../../app/rightClickMenu/context.js";import{Z_INDEX_FOOTER as i}from"../../../constants/zIndex.js";import{CarouselScrollBack as m,CarouselScrollForward as n}from"./carouselScroll.js";import l from"./carouselList.js";import c from"./carouselDrawer.js";import g from"./useCarousel.js";import{DRAWER_BUTTON_GAP_COLLAPSED as u,DRAWER_BUTTON_GAP_EXPANDED as d,NAVIGATION_BUTTON_WIDTH as f,NAVIGATION_BUTTON_GAP as j}from"./constants.js";const y=d-u,x=r.section.withConfig({displayName:"carouselLayout__Wrapper",componentId:"sc-iaovfa-0"})(["position:relative;display:grid;grid:'. d d d d d .' 32px '. . . . . . .' ","px '. p . c . n .' auto / 1fr ","px ","px auto ","px ","px 1fr;width:100%;height:auto;z-index:",";&.carousel-enter{top:","px;&.carousel-enter-active{top:0;transition:","ms ease-out;transition-property:top;}}&.carousel-exit{top:0;&.carousel-exit-active{top:","px;transition:","ms ease-out;transition-property:top;}}"],(t=>{let{isCollapsed:e}=t;return e?u:d}),f,j,j,f,i,(t=>{let{thumbHeight:e}=t;return e+y}),a,(t=>{let{thumbHeight:e}=t;return e+y}),a),h=r.div.withConfig({displayName:"carouselLayout__Area",componentId:"sc-iaovfa-1"})(["grid-area:",";display:flex;align-items:center;justify-content:center;flex-direction:column;"],(t=>{let{area:e}=t;return e}));function CarouselLayout(){const{carouselState:r}=p((t=>{let{state:{carouselState:e}}=t;return{carouselState:e}})),{numPages:i,pageThumbHeight:u}=g((t=>{let{state:{numPages:e,pageThumbHeight:r}}=t;return{numPages:e,pageThumbHeight:r}})),d=o();if(i<=0)return null;const f=r===s.CLOSED,j=[s.OPEN,s.OPENING].includes(r);return t.createElement(e,{in:j,classNames:"carousel",containerRef:!0,nodeRef:d,timeout:a},t.createElement(x,{ref:d,"aria-label":__("Page Carousel","web-stories"),isCollapsed:f,thumbHeight:u},t.createElement(h,{area:"d"},t.createElement(c,null)),!f&&t.createElement(t.Fragment,null,t.createElement(h,{area:"p"},t.createElement(m,null)),t.createElement(h,{area:"c"},t.createElement(l,null)),t.createElement(h,{area:"n"},t.createElement(n,null)))))}export{CarouselLayout as default};
