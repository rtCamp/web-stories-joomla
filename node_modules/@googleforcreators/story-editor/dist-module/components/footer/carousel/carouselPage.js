/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import t from"styled-components";import"prop-types";import{sprintf,__}from"@googleforcreators/i18n";import"../../reorderable/reorderable.js";import r from"../../reorderable/reorderableItem.js";import a from"../../reorderable/reorderableSeparator.js";import"@googleforcreators/react";import"../../reorderable/context.js";import i from"../pagepreview/index.js";import o from"./useCarousel.js";import{THUMBNAIL_LINE_WIDTH as n}from"./constants.js";const s=t.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),n),l=t.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),p=t(a).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:r}=e;return t+r}),(e=>{let{height:t}=e;return t}),l,l,(e=>{let{width:t,margin:r}=e;return(t+r+n)/2}),l,(e=>{let{margin:t}=e;return(t-n)/2}),l,(e=>{let{width:t,margin:r}=e;return r+t/2}),l),g=t(r).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:r}=e;return 0===r?t:0}));function CarouselPage(t){let{pageId:r,index:a}=t;const{pageThumbWidth:n,pageThumbHeight:m,pageThumbMargin:d,clickPage:h,setPageRef:c,page:f,isCurrentPage:u,hasMultiplePages:b}=o((e=>{let{state:{pageThumbWidth:t,pageThumbHeight:a,pageThumbMargin:i,numPages:o,pages:n,currentPageId:s},actions:{clickPage:l,setPageRef:p}}=e;return{pageThumbWidth:t,pageThumbHeight:a,pageThumbMargin:i,clickPage:l,setPageRef:p,page:n.find((e=>{let{id:t}=e;return t===r})),isCurrentPage:r===s,hasMultiplePages:o>1}}));return f&&f.id?e.createElement(l,{ref:e=>c(f,e),"data-testid":`carousel-page-preview-${r}`},0===a&&e.createElement(p,{position:0,width:n,height:m,margin:d},e.createElement(s,{height:m})),e.createElement(g,{position:a,margin:d},e.createElement(i,{tabIndex:u&&b?0:-1,onClick:()=>h(f),role:"option","data-page-id":f.id,label:sprintf(
/* translators: %s: page number. */
__(u?"Page %s (current page)":"Go to page %s","web-stories"),a+1),isActive:u,page:f,width:n,height:m,isInteractive:b})),e.createElement(p,{position:a+1,width:n,height:m,margin:d},e.createElement(s,{height:m}))):null}export{CarouselPage as default};
