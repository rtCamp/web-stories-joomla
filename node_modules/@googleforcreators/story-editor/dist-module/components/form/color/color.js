/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{forwardRef as o,useCallback as t}from"@googleforcreators/react";import n,{css as r}from"styled-components";import i from"prop-types";import{__,sprintf}from"@googleforcreators/i18n";import{getPreviewText as l}from"@googleforcreators/patterns";import{Button as a,BUTTON_VARIANTS as s,BUTTON_TYPES as p,BUTTON_SIZES as c,PLACEMENT as m,TOOLTIP_PLACEMENT as d,Icons as u}from"@googleforcreators/design-system";import"../../../constants/fonts.js";import{MULTIPLE_VALUE as g}from"../../../constants/multipleValue.js";import h from"../../eyedropper/index.js";import I from"../../tooltip/tooltip.js";import{focusStyle as f}from"../../panels/shared/styles.js";import y from"./applyOpacityChange.js";import w from"./opacityInput.js";import C from"./colorInput.js";import{SPACING as E}from"./constants.js";const T=r(["display:flex;align-items:center;"]),x=n.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],T,(e=>{let{isInDesignMenu:o}=e;return o?6:8}),(e=>{let{width:o}=e;return o?`${o}px`:"inherit"}));x.propTypes={isInDesignMenu:i.bool,width:i.number};const _=n.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],T,(e=>{let{isInDesignMenu:o}=e;return o?0:6})),M=n.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:o}=e;return o.colors.divider.primary})),b=n.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(e=>{let{hasInputs:o}=e;return o&&"width: calc(53% - 10px);"})),D=n.div.withConfig({displayName:"color__OpacityWrapper",componentId:"sc-c7i660-4"})(["width:",";"],(e=>{let{isInDesignMenu:o}=e;return o?"calc(39% - 10px)":"calc(47% - 10px)"})),O=n(a).attrs({variant:s.SQUARE,type:p.TERTIARY,size:c.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-5"})(["",";"],f),S=__("Color input","web-stories"),v=o((function Color(o,n){let{onChange:r,allowsGradient:i=!1,allowsOpacity:a=!0,allowsSavedColors:s=!1,value:p=null,label:c=null,containerLabelBase:f=S,changedStyle:T=null,hasEyedropper:v=!1,pickerHasEyedropper:j=!0,maxHeight:A=null,shouldCloseOnSelection:B=!1,allowsSavedColorDeletion:N=!0,pickerPlacement:R=m.RIGHT_START,isInDesignMenu:k=!1,hasInputs:P=!0,width:L,tabIndex:G}=o;const H=t((e=>r(y(p,e))),[p,r]),F=sprintf(
/* translators: 1: the input section in the editor. 2: color input label name. */
__("%1$s: %2$s","web-stories"),f,c),U=p!==g&&Boolean(l(p))&&P,{initEyedropper:W}=h({onChange:e=>r({color:e})}),$=__("Pick a color from canvas","web-stories"),z=k||v?d.BOTTOM:d.BOTTOM_START,Q=L&&p===g;return e.createElement(x,{"aria-label":F,isInDesignMenu:k,width:!Q&&L?L:null},v&&e.createElement(I,{title:$,hasTail:!0,placement:k?d.BOTTOM:d.BOTTOM_START},e.createElement(O,{tabIndex:G,"aria-label":$,onClick:W(),onPointerEnter:W(!1)},e.createElement(u.Pipette,null))),e.createElement(_,{isInDesignMenu:k},e.createElement(b,{hasInputs:P},e.createElement(C,{ref:n,tabIndex:G,onChange:r,value:p,label:c,changedStyle:T,pickerPlacement:R,hasInputs:P,isInDesignMenu:k,spacing:k?E.FLOATING_MENU:E.DEFAULT_SIDEBAR,tooltipPlacement:z,pickerProps:{allowsGradient:i,allowsOpacity:a,allowsSavedColors:s,hasEyedropper:j,allowsSavedColorDeletion:N,maxHeight:A,shouldCloseOnSelection:B}})),a&&U&&e.createElement(e.Fragment,null,e.createElement(M,null),e.createElement(D,{isInDesignMenu:k},e.createElement(w,{tabIndex:G,value:p,onChange:H,isInDesignMenu:k})))))}));export{v as default};
