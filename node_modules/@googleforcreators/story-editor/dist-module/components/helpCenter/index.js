/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import o from"react";import{__}from"@googleforcreators/i18n";import{useRef as e,useEffect as r,useCallback as t}from"@googleforcreators/react";import i from"styled-components";import{ThemeGlobals as s}from"@googleforcreators/design-system";import"prop-types";import"../../constants/fonts.js";import"../../constants/multipleValue.js";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../app/story/context.js";import"@googleforcreators/migration";import"@googleforcreators/templates";import"../../app/config/context.js";import"../../app/api/context.js";import"../../app/history/historyProvider.js";import"../../app/history/context.js";import"../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import{useStoryTriggerListener as p}from"../../app/story/storyTriggers/useStoryTriggers.js";import"../../app/story/storyTriggers/storyTriggersProvider.js";import"../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import{STORY_EVENTS as n}from"../../app/story/storyTriggers/storyEvents/types.js";import{Z_INDEX_FOOTER as a}from"../../constants/zIndex.js";import m from"../directionAware/index.js";import"../../app/helpCenter/provider.js";import{useHelpCenter as l}from"../../app/helpCenter/useHelpCenter/index.js";import g from"../secondaryPopup/index.js";import c from"./navigator/index.js";import d from"./companion/index.js";import{KEYS as y,POPUP_ID as f}from"./constants.js";import{Toggle as u}from"./toggle/index.js";import{forceFocusCompanion as T}from"./utils.js";const j=i.div.withConfig({displayName:"helpCenter__Wrapper",componentId:"sc-12zoy5g-0"})(["z-index:",";"],a),HelpCenter=i=>{let{components:a}=i;const E=e(null),{state:x,actions:v}=l();return r((()=>{x.isOpen&&T()}),[x.isOpen]),p(n.onReplaceBackgroundMedia,t((()=>{v.openToUnreadTip(y.ADD_BACKGROUND_MEDIA)}),[v])),p(n.onReplaceForegroundMedia,t((()=>{v.openToUnreadTip(y.CROP_SELECTED_ELEMENTS)}),[v])),o.createElement(m,null,o.createElement(o.Fragment,null,o.createElement(s.Styles,null),o.createElement(j,{ref:E},o.createElement(g,{popupId:f,isOpen:x.isOpen,ariaLabel:__("Help Center","web-stories")},o.createElement(c,{isOpen:x.isOpen,onNext:v.goToNext,onPrev:v.goToPrev,onAllTips:v.goToMenu,onClose:v.close,hasBottomNavigation:x.hasBottomNavigation,isNextDisabled:x.isNextDisabled,isPrevDisabled:x.isPrevDisabled},o.createElement(d,{readTips:x.readTips,tipKey:x.navigationFlow[x.navigationIndex],onTipSelect:v.goToTip,isLeftToRightTransition:x.isLeftToRightTransition,components:a}))),o.createElement(u,{isOpen:x.isOpen,onClick:v.toggle,notificationCount:x.unreadTipsCount,popupId:f}))))};export{HelpCenter};
