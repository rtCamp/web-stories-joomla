/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import o from"react";import t from"styled-components";import{__}from"@googleforcreators/i18n";import{Icons as e,useGlobalKeyDownEffect as r}from"@googleforcreators/design-system";import{useRef as n,useEffect as s,useFocusOut as i}from"@googleforcreators/react";import{Z_INDEX_FOOTER as a}from"../../constants/zIndex.js";import{isKeyboardUser as c}from"../../utils/keyboardOnlyOutline.js";import m from"../secondaryPopup/index.js";import{ToggleButton as p}from"../toggleButton/index.js";import u from"../directionAware/index.js";import{KEYBOARD_SHORTCUTS_PADDING as d}from"../footer/constants.js";import l from"./shortcutMenu.js";import{TOGGLE_SHORTCUTS_MENU as g}from"./constants.js";import"prop-types";import"@googleforcreators/tracking";import"./keyboardShortcutsMenuContext/context.js";import{useKeyboardShortcutsMenu as y}from"./keyboardShortcutsMenuContext/useKeyboardShortcutsMenu.js";const f=t(p).withConfig({displayName:"keyboardShortcutsMenu__StyledToggleButton",componentId:"sc-1nngfyy-0"})(["padding-left:","px;padding-right:","px;width:auto;display:block;background-color:",";"],d,d,(o=>{let{theme:t}=o;return t.colors.bg.primary})),b=t.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-1"})(["z-index:",";"],a),h=t(e.Keyboard).withConfig({displayName:"keyboardShortcutsMenu__MainIcon",componentId:"sc-1nngfyy-2"})(["height:32px;width:auto;display:block;"]);function KeyboardShortcutsMenu(){const t=n(),e=n(),{close:a,toggle:p,isOpen:d}=y((o=>{let{actions:{close:t,toggle:e},state:{isOpen:r}}=o;return{close:t,toggle:e,isOpen:r}}));return s((()=>{c()&&!d&&t?.current?.focus?.()}),[d]),r(g,p,[p]),i(e,a,[a]),o.createElement(u,null,o.createElement(b,{ref:e},o.createElement(m,{popupId:"keyboard_shortcut_menu",isOpen:d,ariaLabel:__("Keyboard Shortcuts","web-stories")},o.createElement(l,{toggleMenu:p})),o.createElement(f,{ref:t,isOpen:d,"aria-owns":"keyboard_shortcut_menu",onClick:p,"aria-label":__("Keyboard Shortcuts","web-stories"),label:__("Keyboard Shortcuts","web-stories"),MainIcon:h,shortcut:"mod+/"})))}export{KeyboardShortcutsMenu as default};
