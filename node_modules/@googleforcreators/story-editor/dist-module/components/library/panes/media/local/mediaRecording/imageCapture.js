/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{__}from"@googleforcreators/i18n";import t from"styled-components";import{useState as o}from"@googleforcreators/react";import{getImageFromVideo as r,createBlob as a,blobToFile as i}from"@googleforcreators/media";import"prop-types";import{Button as n,BUTTON_TYPES as m,BUTTON_SIZES as s}from"@googleforcreators/design-system";import{MEDIA_POSTER_IMAGE_MIME_TYPE as c}from"../../../../../../constants/media.js";const l=t.img.withConfig({displayName:"imageCapture__Photo",componentId:"sc-u3jq3q-0"})(["display:block;width:240px;margin:0 auto;"]),p=t.div.withConfig({displayName:"imageCapture__Actions",componentId:"sc-u3jq3q-1"})(["display:flex;justify-content:center;margin-top:20px;"]),ImageCapture=t=>{let{videoRef:g,onCapture:u,onClear:d}=t;const[f,y]=o("");return e.createElement(e.Fragment,null,f&&e.createElement(l,{src:f,alt:__("Image capture","web-stories")}),e.createElement(p,null,e.createElement(n,{type:m.PRIMARY,size:s.SMALL,onClick:async()=>{if(!g.current)return;const e=await r(g.current),t=await a(e);y(t),u(i(e,"image-capture.jpeg",c))},disabled:null!==d},__("Capture Image","web-stories")),e.createElement(n,{type:m.TERTIARY,size:s.SMALL,onClick:()=>{y(""),d()},disabled:null===d},__("Clear Image","web-stories"))))};export{ImageCapture};
