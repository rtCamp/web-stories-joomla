/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import o from"react";import{useState as r,useCallback as t}from"@googleforcreators/react";import{__}from"@googleforcreators/i18n";import{LOCAL_STORAGE_PREFIX as e,localStore as i,Text as s,THEME_CONSTANTS as p}from"@googleforcreators/design-system";import"prop-types";import"@googleforcreators/templates";import"../../../../../app/config/context.js";import"../../../../../app/api/context.js";import"../../../../../app/currentUser/context.js";import a from"../../../../../app/currentUser/useCurrentUser.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"../../../../../constants/fonts.js";import"../../../../../constants/multipleValue.js";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../../../app/story/context.js";import"@googleforcreators/migration";import"../../../../../app/history/historyProvider.js";import"../../../../../app/history/context.js";import"../../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import"../../../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../../../utils/generateBlurhash.worker.js";import"../../../../../app/media/media3p/providerConfiguration.js";import"../../../../../app/media/utils/useFFmpeg.js";import"../../../../../app/media/media3p/api/context.js";import"../../../../../app/media/local/constants.js";import"../../../../../app/media/media3p/providerReducer.js";import"../../../../../app/media/context.js";import m from"../../../../../app/media/local/useLocalMedia.js";import n from"../../../../dialog/dialog.js";const g=e.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;function VideoOptimizationDialog(){const{isTranscoding:e}=m((o=>{let{state:{isTranscoding:r}}=o;return{isTranscoding:r}})),[c,d]=r(Boolean(i.getItemByKey(g))),{updateCurrentUser:l}=a((o=>{let{actions:r}=o;return{updateCurrentUser:r.updateCurrentUser}})),u=t((o=>{d(o),i.setItemByKey(g,o)}),[]),y=t((()=>{l({mediaOptimization:!1}),u(!0)}),[l,u]),f=t((()=>{u(!0)}),[u]),j=__("Video optimization in progress","web-stories"),S=__("This process canâ€™t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return o.createElement(n,{isOpen:e&&!c,onClose:f,title:j,onSecondary:y,secondaryText:__("Disable optimization","web-stories"),onPrimary:f,primaryText:__("Sounds good","web-stories")},o.createElement(s,{size:p.TYPOGRAPHY.PRESET_SIZES.SMALL},S))}export{VideoOptimizationDialog as default};
