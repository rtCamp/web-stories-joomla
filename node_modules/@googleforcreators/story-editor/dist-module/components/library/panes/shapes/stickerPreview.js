/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useMemo as t,useState as r}from"@googleforcreators/react";import"prop-types";import o from"styled-components";import i from"@googleforcreators/stickers";import{Button as n,BUTTON_SIZES as s,ThemeGlobals as a,themeHelpers as l}from"@googleforcreators/design-system";import{useUnits as c}from"@googleforcreators/units";import d from"../../useLibrary.js";import p from"../shared/libraryMoveable.js";import m from"../shared/insertionOverlay.js";import{DEFAULT_ELEMENT_WIDTH as h}from"./shapePreview.js";const f=o(n).attrs({size:s.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),a.FOCUS_VISIBLE_SELECTOR,a.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return l.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),g=o.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),u=o.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));function StickerPreview(o){let{stickerType:n,index:s}=o;const{insertElement:a}=d((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:l,dataToEditorY:E}=c((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),w=i[n],y=w.aspectRatio,v=t((()=>({width:h*y,height:h,sticker:{type:n}})),[y,n]),[k,b]=r(!1),S=()=>b(!0),C=()=>b(!1),P=w.svg;return e.createElement(f,{"data-testid":`library-sticker-${n}`,onClick:()=>a("sticker",{width:h,sticker:{type:n}}),tabIndex:0===s?0:-1,onPointerEnter:S,onFocus:S,onPointerLeave:C,onBlur:C},e.createElement(g,null,e.createElement(P,{style:{height:y<.955?"60%":"auto",width:y<.955?"auto":"60%"}}),k&&e.createElement(m,null),e.createElement(p,{type:"sticker",elementProps:v,cloneElement:u,cloneProps:{width:l(h*(y<1?y:1)),height:E(h/(y<1?1:y)),children:e.createElement(P,{style:{height:"auto",width:"100%"}})}})))}export{StickerPreview as default};
