/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useRef as t,useState as o,useResizeEffect as r,useCallback as s,useMemo as a}from"@googleforcreators/react";import i from"styled-components";import{__}from"@googleforcreators/i18n";import{v4 as n}from"uuid";import{Text as p,THEME_CONSTANTS as m,Toggle as l}from"@googleforcreators/design-system";import"prop-types";import"../../../../utils/storyPageToNode.js";import"@ap.cx/hues";import"../../../../constants/fonts.js";import"../../../../constants/multipleValue.js";import"@googleforcreators/animation";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../../app/story/context.js";import"@googleforcreators/migration";import"@googleforcreators/templates";import"../../../../app/config/context.js";import"../../../../app/api/context.js";import"../../../../app/history/historyProvider.js";import"../../../../app/history/context.js";import"../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import"../../../../app/pageCanvas/context.js";import"@googleforcreators/units";import"../../../../app/pageCanvas/pageCanvasCacheValidator.js";import c from"../../../../app/pageCanvas/usePageCanvas.js";import{Container as g}from"../../common/section.js";import{Pane as d}from"../shared/index.js";import f from"../../useLibrary.js";import u from"../../../tooltip/tooltip.js";import y from"./fontPreview.js";import j from"./paneId.js";import{PRESETS as P}from"./textPresets.js";import h from"./useInsertPreset.js";import v from"./textSets/textSetsPane.js";import x from"./stylePresets/stylePresets.js";function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},C.apply(this,arguments)}const S=i(d).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),E=i.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),b=i.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function TextPane(i){const d=t(),[,w]=o(),{shouldUseSmartColor:T,setShouldUseSmartColor:_}=f((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor,setShouldUseSmartColor:e.actions.setShouldUseSmartColor}))),{getPosition:I,insertPreset:R}=h({shouldUseSmartColor:T}),U=c((e=>{let{actions:t}=e;return t.generateDeferredCurrentPageCanvas}));r(d,(()=>{w(Date.now())}),[]);const A=s((()=>_((e=>!e))),[_]),O=a((()=>`toggle_auto_color_${n()}`),[]);return e.createElement(S,C({id:j},i,{ref:d}),e.createElement(b,null,e.createElement(p,{as:"label",htmlFor:O,size:m.TYPOGRAPHY.PRESET_SIZES.SMALL},__("Adaptive text colors","web-stories")),e.createElement(u,{title:__("May impact performance when inserting text","web-stories")},e.createElement(l,{id:O,checked:T,onChange:A}))),e.createElement(g,{onPointerOver:()=>T&&U()},e.createElement(E,null,P.map(((t,o)=>{let{title:r,element:s}=t;return e.createElement(y,{key:r,title:r,element:s,insertPreset:R,getPosition:I,index:o})})))),e.createElement(x,null),d.current&&e.createElement(v,{paneRef:d}))}export{TextPane as default};
