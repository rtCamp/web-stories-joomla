/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useRef as t,useState as o,useCallback as r}from"@googleforcreators/react";import"prop-types";import i from"styled-components";import{__}from"@googleforcreators/i18n";import{Button as l,BUTTON_VARIANTS as n,BUTTON_TYPES as a,BUTTON_SIZES as s,themeHelpers as p,useKeyDownEffect as m,TOOLTIP_PLACEMENT as c,Icons as g}from"@googleforcreators/design-system";import"@googleforcreators/transform";import"../../../dropTargets/provider.js";import"../../../dropTargets/context.js";import"../../../../app/history/historyProvider.js";import"../../../../app/history/context.js";import"@googleforcreators/templates";import"../../../../app/config/context.js";import d from"../../../../app/config/useConfig.js";import"../../../../app/api/context.js";import"@googleforcreators/fonts";import"@googleforcreators/dom";import"../../../../constants/fonts.js";import"../../../../constants/multipleValue.js";import"../../../../app/font/context.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../../app/story/context.js";import"@googleforcreators/migration";import"../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import"../../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../../utils/generateBlurhash.worker.js";import"../../../../app/media/media3p/providerConfiguration.js";import"../../../../app/media/utils/useFFmpeg.js";import"../../../../app/media/media3p/api/context.js";import"../../../../app/media/local/constants.js";import"../../../../app/media/media3p/providerReducer.js";import"../../../../app/media/context.js";import"sat";import"@googleforcreators/units";import"../../../../app/layout/context.js";import"../../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../../library/panes/text/textPresets.js";import"../../../../app/canvas/context.js";import"../../../../app/currentUser/context.js";import"../../../../app/helpCenter/provider.js";import"../../../../app/helpCenter/context.js";import"../../../helpCenter/constants.js";import"../../../../app/rightClickMenu/context.js";import u from"../../panel/panel.js";import"../../panel/context.js";import"../../panel/shared/title.js";import"../../panel/shared/content.js";import f from"../../../tooltip/tooltip.js";import b from"./useAlignment.js";const y=i.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;overflow:overlay;"]),j=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],E=i(l).attrs({variant:n.SQUARE,type:a.TERTIARY,size:s.SMALL}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(e=>{let{theme:t}=e;return p.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")})),h=i(u).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black24}),(e=>{let{theme:t}=e;return t.colors.divider.secondary}));function ElementAlignmentPanel(i){let{selectedElements:l,pushUpdate:n}=i;const{isRTL:a}=d(),{isDistributionEnabled:s,handleAlignLeft:p,handleAlignCenter:u,handleAlignRight:A,handleAlignTop:w,handleAlignMiddle:x,handleAlignBottom:C,handleHorizontalDistribution:v,handleVerticalDistribution:T}=b({selectedElements:l,updateElements:e=>n(e,!0)}),k=t(),[R,S]=o(null),F=r((e=>()=>{const t=j.findIndex((e=>e===R)),o=j[t+e];o&&(S(o),k.current.querySelector(`#${o}`).focus())}),[R,S]),D=a?-1:1;return m(k,"left",(()=>F(D)),[F,D]),m(k,"right",(()=>F(-D)),[F,D]),e.createElement(h,{name:"alignment",canCollapse:!1,ariaLabel:__("Alignment","web-stories")},e.createElement(y,{ref:k},e.createElement(f,{placement:c.BOTTOM_START,title:__("Distribute horizontally","web-stories")},e.createElement(E,{disabled:!s,onClick:v,"aria-label":__("Distribute horizontally","web-stories"),id:j[0],onFocus:()=>S(j[0])},e.createElement(g.DistributeHorizontal,null))),e.createElement(f,{title:__("Distribute vertically","web-stories")},e.createElement(E,{disabled:!s,onClick:T,"aria-label":__("Distribute vertically","web-stories"),id:j[1],onFocus:()=>S(j[1])},e.createElement(g.DistributeVertical,null))),e.createElement(f,{title:__("Align left","web-stories")},e.createElement(E,{onClick:p,"aria-label":__("Align left","web-stories"),id:j[2],onFocus:()=>S(j[2])},e.createElement(g.AlignLeft,null))),e.createElement(f,{title:__("Align center","web-stories")},e.createElement(E,{onClick:u,"aria-label":__("Align center","web-stories"),id:j[3],onFocus:()=>S(j[3])},e.createElement(g.AlignCenter,null))),e.createElement(f,{title:__("Align right","web-stories")},e.createElement(E,{onClick:A,"aria-label":__("Align right","web-stories"),id:j[4],onFocus:()=>S(j[4])},e.createElement(g.AlignRight,null))),e.createElement(f,{title:__("Align top","web-stories")},e.createElement(E,{onClick:w,"aria-label":__("Align top","web-stories"),id:j[5],onFocus:()=>S(j[5])},e.createElement(g.AlignTop,null))),e.createElement(f,{title:__("Align vertical center","web-stories")},e.createElement(E,{onClick:x,"aria-label":__("Align vertical center","web-stories"),id:j[6],onFocus:()=>S(j[6])},e.createElement(g.AlignMiddle,null))),e.createElement(f,{title:__("Align bottom","web-stories")},e.createElement(E,{onClick:C,"aria-label":__("Align bottom","web-stories"),id:j[7],onFocus:()=>S(j[7])},e.createElement(g.AlignBottom,null)))))}export{ElementAlignmentPanel as default};
