/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import{useRef as t,useMemo as r}from"@googleforcreators/react";import"prop-types";import o,{css as i}from"styled-components";import{_x,__}from"@googleforcreators/i18n";import{Button as n,BUTTON_VARIANTS as a,BUTTON_TYPES as s,BUTTON_SIZES as c,Icons as l,Tooltip as d}from"@googleforcreators/design-system";import{SCALE_DIRECTION as T,ROTATION as _,DIRECTION as p,SCALE_DIRECTION_MAP as u}from"@googleforcreators/animation";import"../../../../app/config/context.js";import O from"../../../../app/config/useConfig.js";import m from"../../../form/shared/useRadioNavigation.js";function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},g.apply(this,arguments)}const E=o(n).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:r,theme:o}=e;return t&&!r&&i(["background-color:",";"],o.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case p.RIGHT_TO_LEFT:return"rotate(270deg)";case p.TOP_TO_BOTTOM:return"rotate(180deg)";case p.LEFT_TO_RIGHT:return"rotate(90deg)";case _.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case T.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case T.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case T.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case T.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),f=o((t=>{let{className:r,direction:o,...i}=t;return e.createElement(E,g({variant:a.SQUARE,type:s.TERTIARY,size:c.SMALL,className:r,direction:o},i),[...Object.values(p),...Object.values(T)].includes(o)&&e.createElement(l.ArrowUp,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),L=o.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),C=o.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),I=o.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case p.RIGHT_TO_LEFT:return i(["top:50%;right:","px;transform:translateY(-50%);"],3);case p.TOP_TO_BOTTOM:return i(["top:","px;left:50%;transform:translateX(-50%);"],3);case p.LEFT_TO_RIGHT:return i(["top:50%;left:","px;transform:translateY(-50%);"],3);case _.COUNTER_CLOCKWISE:return i(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case T.SCALE_OUT_BOTTOM_LEFT:return i(["bottom:","px;left:","px;"],3,3);case T.SCALE_IN_TOP_LEFT:return i(["top:","px;left:","px;"],3,3);case T.SCALE_OUT_TOP_RIGHT:return i(["top:","px;right:","px;"],3,3);case T.SCALE_IN_BOTTOM_RIGHT:return i(["bottom:","px;right:","px;"],3,3);default:return i(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),h=o.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),b=o.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),S={[p.RIGHT_TO_LEFT]:_x("right to left","animation direction","web-stories"),[p.LEFT_TO_RIGHT]:_x("left to right","animation direction","web-stories"),[p.TOP_TO_BOTTOM]:_x("top to bottom","animation direction","web-stories"),[p.BOTTOM_TO_TOP]:_x("bottom to top","animation direction","web-stories"),[_.CLOCKWISE]:_x("clockwise","rotation direction","web-stories"),[_.COUNTER_CLOCKWISE]:_x("counterclockwise","rotation direction","web-stories"),[T.SCALE_IN]:_x("scale in","scale direction","web-stories"),[T.SCALE_OUT]:_x("scale out","scale direction","web-stories")},w=e=>{switch(e){case T.SCALE_IN_TOP_LEFT:case T.SCALE_IN_BOTTOM_RIGHT:return T.SCALE_IN;case T.SCALE_OUT_BOTTOM_LEFT:case T.SCALE_OUT_TOP_RIGHT:return T.SCALE_OUT;default:return e}},A=e=>[...u.SCALE_IN,...u.SCALE_OUT].includes(e),R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R(e)?.[0]},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=R(e);return t[t.length-1]},v=[p.TOP_TO_BOTTOM,p.RIGHT_TO_LEFT,p.BOTTOM_TO_TOP,p.LEFT_TO_RIGHT],y=[T.SCALE_IN_TOP_LEFT,T.SCALE_OUT_TOP_RIGHT,T.SCALE_IN_BOTTOM_RIGHT,T.SCALE_OUT_BOTTOM_LEFT],F=(e,t,r)=>{const o=r?t.reverse():t;return e.sort(((e,t)=>o.indexOf(e)-o.indexOf(t)))},DirectionRadioInput=o=>{let{value:i,directions:n=[],onChange:a,disabled:s=[],tooltip:c}=o;const l=t(),{isRTL:_}=O(),p=r((()=>{const e=[];if(n.includes(T.SCALE_OUT)||n.includes(T.SCALE_IN)){const t=[];n.includes(T.SCALE_OUT)&&t.push(...u.SCALE_OUT),n.includes(T.SCALE_IN)&&t.push(...u.SCALE_IN),e.push(...F(t,y,_))}else e.push(...F(n,v,_));return e}),[n,_]);return m(l),e.createElement(L,null,e.createElement(C,null),e.createElement(h,null,__("Which Direction?","web-stories")),e.createElement(b,{ref:l},p.map((t=>{const r=s?.includes(w(t));return e.createElement(I,{key:t,"aria-label":S[t],htmlFor:t,direction:t,disabled:r},e.createElement(d,{title:r?c:"",placement:A(t)?N(t):x(t)},e.createElement(f,{direction:t,selected:i===t||t?.includes(i),disabled:r,onClick:()=>a(w(t))})))}))))};export{DirectionRadioInput};
