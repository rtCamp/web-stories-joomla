/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import r from"react";import"prop-types";import{useCallback as o}from"@googleforcreators/react";import{_x,__,sprintf}from"@googleforcreators/i18n";import{OverlayType as e,getDefinitionForType as t}from"@googleforcreators/elements";import s from"../../../form/color/color.js";import i from"../../../form/filterToggle/filterToggle.js";import"../../../form/linkIcon.js";import"../../../form/link.js";import"../../../form/media.js";import"@googleforcreators/design-system";import"@googleforcreators/media";import"@googleforcreators/transform";import"../../../dropTargets/provider.js";import"../../../dropTargets/context.js";import"../../../../app/history/historyProvider.js";import"../../../../app/history/context.js";import"@googleforcreators/templates";import"../../../../app/config/context.js";import"../../../../app/api/context.js";import"@googleforcreators/fonts";import"@googleforcreators/dom";import"../../../../constants/fonts.js";import{MULTIPLE_VALUE as p}from"../../../../constants/multipleValue.js";import"../../../../app/font/context.js";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"../../../../app/story/context.js";import"@googleforcreators/migration";import"../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import a from"../../../../app/story/useStory.js";import"../../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import m from"../../../../utils/useCORSProxy.js";import"../../../../utils/generateBlurhash.worker.js";import"../../../../app/media/media3p/providerConfiguration.js";import"../../../../app/media/utils/useFFmpeg.js";import"../../../../app/media/media3p/api/context.js";import"../../../../app/media/local/constants.js";import"../../../../app/media/media3p/providerReducer.js";import"../../../../app/media/context.js";import"sat";import"@googleforcreators/units";import"../../../../app/layout/context.js";import"../../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../../library/panes/text/textPresets.js";import"../../../../app/canvas/context.js";import"../../../../app/currentUser/context.js";import"../../../../app/helpCenter/provider.js";import"../../../../app/helpCenter/context.js";import"../../../helpCenter/constants.js";import"../../../../app/rightClickMenu/context.js";import l from"../../../form/row.js";import"../../../form/switch.js";import"../../../form/textArea.js";import"../../../form/context.js";import"../../../form/dateTime/dateTime.js";import"../../../form/required.js";import"../../../form/radioGroup/index.js";import"../../../form/select/select.js";import"../../../form/hierarchical/index.js";import"../../panel/panel.js";import"../../panel/context.js";import"../../panel/shared/title.js";import"../../panel/shared/content.js";import n from"../../panel/simplePanel.js";import"../../shared/flipControls.js";import"../../shared/linkRelations.js";import c from"../../shared/useCommonColorValue.js";import g from"./convertOverlay.js";const f={[e.NONE]:{label:_x("None","overlay","web-stories")},[e.SOLID]:{label:__("Tint","web-stories")},[e.LINEAR]:{label:__("Linear","web-stories")},[e.RADIAL]:{label:__("Vignette","web-stories")}};function FilterPanel(j){let{selectedElements:d,pushUpdate:u}=j;const y=c(d,"overlay"),x=y===p,h=y?y.type||e.SOLID:e.NONE,{getProxiedUrl:b}=m(),{isDefaultBackground:E}=d[0],v=a((r=>!E||r.state.currentPage?.backgroundColor)),k=o((r=>u({overlay:r},!0)),[u]),C=h!==e.RADIAL&&h!==e.LINEAR,{LayerIcon:P}=t(d[0].type);return r.createElement(n,{name:"filter",title:__("Filters","web-stories")},!x&&r.createElement(l,null,Object.keys(f).map((o=>{const{label:t}=f[o];return r.createElement(i,{key:o,element:d[0],label:t,isToggled:h===o,onClick:()=>k(g(y,h,o)),filter:g(y,e.NONE,o),"aria-label":sprintf(
/* translators: %s: Filter type */
__("Filter: %s","web-stories"),t)},r.createElement(P,{element:d[0],getProxiedUrl:b,currentPageBackgroundColor:v}))}))),h!==e.NONE&&r.createElement(l,null,r.createElement(s,{label:__("Color","web-stories"),value:y,onChange:k,allowsGradient:!0,hasEyedropper:C})))}export{FilterPanel as default};
