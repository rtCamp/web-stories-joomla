/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import"prop-types";import{Text as t,Button as r,THEME_CONSTANTS as o,BUTTON_TYPES as s,BUTTON_SIZES as p,BUTTON_VARIANTS as a,Icons as i,Popup as n,PLACEMENT as l}from"@googleforcreators/design-system";import{__}from"@googleforcreators/i18n";import m from"styled-components";import{useRef as c,useState as g}from"@googleforcreators/react";import"@googleforcreators/transform";import"../../../dropTargets/provider.js";import"../../../dropTargets/context.js";import"../../../../app/history/historyProvider.js";import"../../../../app/history/context.js";import"@googleforcreators/templates";import"../../../../app/config/context.js";import d from"../../../../app/config/useConfig.js";import"../../../../app/api/context.js";import"@googleforcreators/fonts";import"@googleforcreators/dom";import{PRESET_TYPES as y}from"../../../../constants/index.js";import"../../../../app/font/context.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../../app/story/context.js";import"@googleforcreators/migration";import"../../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import f from"../../../../app/story/useStory.js";import"../../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../../utils/generateBlurhash.worker.js";import"../../../../app/media/media3p/providerConfiguration.js";import"../../../../app/media/utils/useFFmpeg.js";import"../../../../app/media/media3p/api/context.js";import"../../../../app/media/local/constants.js";import"../../../../app/media/media3p/providerReducer.js";import"../../../../app/media/context.js";import"sat";import"@googleforcreators/units";import"../../../../app/layout/context.js";import"../../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../../library/panes/text/textPresets.js";import"../../../../app/canvas/context.js";import"../../../../app/currentUser/context.js";import"../../../../app/helpCenter/provider.js";import"../../../../app/helpCenter/context.js";import"../../../helpCenter/constants.js";import"../../../../app/rightClickMenu/context.js";import u from"../../../../utils/useAddPreset.js";import j from"../../../sidebar/useSidebar.js";import S from"../../../styleManager/styleGroup.js";import h from"../../../styleManager/styleManager.js";import{MoreButton as E,NoStylesWrapper as x}from"../../../styleManager/components.js";import P from"../../../styleManager/useApplyStyle.js";const T=m.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),C=m.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),v=m(t).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold})),R=m(r).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),b=m(t).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),w={x:12};function PresetPanel(t){let{pushUpdate:r}=t;const m=f((e=>{let{state:t}=e;return t.story.globalStoryStyles.textStyles})),{refs:{sidebar:A}}=j(),_=c(null),[M,I]=g(!1),{isRTL:k,styleConstants:{topOffset:L}={}}=d(),N=m.length>0,Y=P({pushUpdate:r}),{addGlobalPreset:G}=u({presetType:y.STYLE}),H=e=>{Y(e)};return e.createElement(e.Fragment,null,e.createElement(T,null,e.createElement(v,{size:o.TYPOGRAPHY.PRESET_SIZES.SMALL},__("Recently Saved Styles","web-stories")),e.createElement(R,{type:s.TERTIARY,size:p.SMALL,variant:a.SQUARE,onClick:G,"aria-label":__("Add style","web-stories")},e.createElement(i.Plus,null))),N&&e.createElement(e.Fragment,null,e.createElement(C,null,e.createElement(S,{styles:[...m].reverse().slice(0,2),handleClick:H})),e.createElement(E,{ref:_,onClick:()=>I(!0),"aria-haspopup":"dialog","aria-expanded":M},__("More styles","web-stories"),e.createElement(i.ChevronDownSmall,null)),e.createElement(n,{topOffset:L,isRTL:k,anchor:_,dock:A,isOpen:M,placement:l.RIGHT_START,spacing:w,renderContents:()=>e.createElement(h,{styles:m,applyStyle:H,onClose:()=>I(!1)})})),!N&&e.createElement(x,null,e.createElement(b,{size:o.TYPOGRAPHY.PRESET_SIZES.SMALL},__("No Styles Saved","web-stories"))))}export{PresetPanel as default};
