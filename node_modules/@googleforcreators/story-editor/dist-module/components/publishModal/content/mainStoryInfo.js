/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import t from"react";import{useState as r,useCallback as o}from"@googleforcreators/react";import{TextArea as e,Headline as s,THEME_CONSTANTS as p}from"@googleforcreators/design-system";import i from"styled-components";import{__}from"@googleforcreators/i18n";import"@googleforcreators/transform";import"../../dropTargets/provider.js";import"../../dropTargets/context.js";import"../../../app/history/historyProvider.js";import"../../../app/history/context.js";import"prop-types";import"@googleforcreators/templates";import"../../../app/config/context.js";import a from"../../../app/config/useConfig.js";import"../../../app/api/context.js";import"@googleforcreators/fonts";import"@googleforcreators/dom";import"../../../constants/fonts.js";import"../../../constants/multipleValue.js";import"../../../app/font/context.js";import"@googleforcreators/media";import"@googleforcreators/tracking";import"@googleforcreators/animation";import"uuid";import"@googleforcreators/masks";import"@googleforcreators/element-library";import"@googleforcreators/elements";import"../../../app/story/context.js";import"@googleforcreators/migration";import"../../../app/story/actions/useSaveStory.js";import"clone-deep";import"../../../app/story/useStoryReducer/useStoryReducer.js";import"@googleforcreators/output";import"../../../app/story/storyTriggers/storyTriggersProvider.js";import"../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js";import"../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js";import m from"../../../app/story/useStory.js";import"../../../app/media/useUploadMedia.js";import"@googleforcreators/patterns";import"../../../utils/generateBlurhash.worker.js";import"../../../app/media/media3p/providerConfiguration.js";import"../../../app/media/utils/useFFmpeg.js";import"../../../app/media/media3p/api/context.js";import"../../../app/media/local/constants.js";import"../../../app/media/media3p/providerReducer.js";import"../../../app/media/context.js";import"sat";import"@googleforcreators/units";import"../../../app/layout/context.js";import"../../../app/layout/useZoomSetting.js";import"@googleforcreators/rich-text";import"@googleforcreators/stickers";import"../../library/panes/text/textPresets.js";import"../../../app/canvas/context.js";import"../../../app/currentUser/context.js";import"../../../app/helpCenter/provider.js";import"../../../app/helpCenter/context.js";import"../../helpCenter/constants.js";import"../../../app/rightClickMenu/context.js";import{updateSlug as n}from"../../../utils/storyUpdates.js";import l from"../../sidebar/useSidebar.js";import{EXCERPT_MAX_LENGTH as c}from"../../panels/document/excerpt/excerpt.js";import{INPUT_KEYS as g}from"../constants.js";const d=i.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),u=i(e).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),MainStoryInfo=()=>{const e=a((t=>{let{storyId:r}=t;return r})),i=m((t=>{let{actions:r}=t;return r.updateStory})),f=m((t=>{let{state:{story:r}}=t;return{[g.EXCERPT]:r.excerpt,[g.TITLE]:r.title||""}})),y=m((t=>{let{state:{story:{slug:r}}}=t;return r})),j=l((t=>{let{data:r}=t;return r?.modalSidebarTab?.IsolatedStatusPanel})),[E,T]=r(f),x=o((t=>{n({currentSlug:y,currentTitle:t,storyId:e,updateStory:i})}),[y,i,e]),S=o((t=>{let{target:r}=t;const{value:o,name:e}=r;i({properties:{[e]:o}}),e===g.TITLE&&x(o)}),[x,i]),h=t=>{let{currentTarget:r}=t;T((t=>({...t,[r.name]:r.value})))};return t.createElement(t.Fragment,null,t.createElement(d,null,t.createElement(s,{as:"label",size:p.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:g.TITLE},__("Story Title","web-stories")),t.createElement(u,{name:g.TITLE,id:"story-title",showCount:!0,value:E[g.TITLE],onChange:h,onBlur:S,"aria-label":__("Story Title","web-stories"),placeholder:__("Add title","web-stories")})),t.createElement(d,null,t.createElement(s,{as:"label",size:p.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:g.EXCERPT},__("Story Description","web-stories")),t.createElement(u,{name:g.EXCERPT,id:"story-excerpt",showCount:!0,maxLength:c,value:E[g.EXCERPT],"aria-label":__("Story Description","web-stories"),placeholder:__("Write a description of the story","web-stories"),hint:__("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:h,onBlur:S})),j&&t.createElement(j,null))};export{MainStoryInfo as default};
