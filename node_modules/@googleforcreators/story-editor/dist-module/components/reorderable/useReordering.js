/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{sprintf,__}from"@googleforcreators/i18n";import{useState as e,useCallback as r,useRef as t,useEffect as o}from"@googleforcreators/react";import{useLiveRegion as n}from"@googleforcreators/design-system";function i(i,s){const[u,a]=e(!1),[l,p]=e(null),[c,m]=e(null),[d,f]=e(null),g=n("assertive"),v=r((e=>{let{position:r,onStartReordering:t=(()=>{})}=e;return e=>{e.shiftKey||e.metaKey||(t(),m(r),f(e.target))}}),[]),E=t(null);return o((()=>{E.current=l}),[l]),o((()=>{if(!d)return;const e=e=>{if(e.preventDefault(),null!==E.current){const e=E.current;i(c,e>c?e-1:e)}f(null)},r=()=>a(!0),t=e=>{"Escape"===e.key&&(f(null),e.stopPropagation())};return d.ownerDocument.addEventListener("pointerup",e),d.ownerDocument.addEventListener("keydown",t,!0),d.addEventListener("pointermove",r),()=>{p(null),a(!1),d.removeEventListener("pointermove",r),d.ownerDocument.removeEventListener("pointerup",e),d.ownerDocument.removeEventListener("keydown",t,!0)}}),[d,c,p,a,i]),o((()=>{if(u&&l){const e=s-l,r=sprintf(
/* translators: %d: new position. */
__("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),e);g(r)}}),[u,l,s,g]),{isReordering:u,currentSeparator:l,setCurrentSeparator:p,handleStartReordering:v}}export{i as default};
