/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import e from"react";import"prop-types";import o from"styled-components";import{useState as t,useCallback as r}from"@googleforcreators/react";import{isDraggingFile as a}from"../../utils/dragEvent.js";import n from"./context.js";const l=o.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),i=o.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),p=o.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function d(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(o){let{disabled:s,label:g,labelledBy:c,onDrop:m,children:f}=o;const[D,h]=t(!1),u=r((e=>{const{dataTransfer:o}=e;a(e)&&(d(e),s?o.effectAllowed="none":(o.effectAllowed="copy",h(!0)))}),[s]),v=r((e=>{d(e),h(!1)}),[]),b=r((e=>{d(e),h(!1),!s&&m&&m([...e.dataTransfer.files])}),[s,m]);return e.createElement(l,{onDragEnter:u,onDrop:b,onDragOver:d},D&&e.createElement(p,{onDragEnter:u,onDragLeave:v,onDragOver:d,onDrop:b,"aria-label":g,"aria-labelledby":c}),e.createElement(n.Provider,{value:{isDragging:D}},e.createElement(i,null,f)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null};export{UploadDropTarget as default};
