/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{isPatternEqual as t,createSolid as o,convertToCSS as r,generatePatternStyles as n}from"@googleforcreators/patterns";import{getHTMLInfo as e}from"@googleforcreators/rich-text";import{generateFontFamily as i}from"@googleforcreators/element-library";import{BACKGROUND_TEXT_MODE as l}from"@googleforcreators/elements";import{PRESET_TYPES as c}from"../constants/index.js";import u from"./objectPick.js";import{MULTIPLE_VALUE as f}from"../constants/multipleValue.js";const a=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function g(o,r,n){const e=r.colors,i=n?"color":"background";return e.find((r=>{try{return t(r,o,i)}catch(t){return!1}}))}function s(t,o){const n=o.textStyles,e=r(d(t));return n.find((t=>e===r(d(t))))}function d(t,o){const{color:r,backgroundColor:e,font:c,fontWeight:u,backgroundTextMode:f,textAlign:a,letterSpacing:g,lineHeight:s,isItalic:d,isUnderline:m,padding:p,fontSize:b}=t;let x={textAlign:a,letterSpacing:g/100+"em",fontWeight:u,textDecoration:m?"underline":null,fontStyle:d?"italic":null,fontFamily:i(c),...n(r,"color")};return o||(x={...x,fontSize:b,lineHeight:s,padding:p,backgroundTextMode:f}),f===l.NONE||o&&f===l.HIGHLIGHT||(x={...x,...n(e,"background")}),x}function m(t){return t!==f?t:null}function p(t){const{color:r,fontWeight:n,isItalic:i,isUnderline:l,letterSpacing:c}=e(t);return{color:r!==f?r:o(0,0,0),fontWeight:m(n),isItalic:m(i),isUnderline:m(l),letterSpacing:m(c)}}function b(t,o,r,n){return{colors:c.STYLE===r?[]:t.map((t=>{let{content:o,backgroundColor:r}=t;return n?r:e(o).color})).filter((t=>t!==f)).filter((t=>t&&!g(t,o,!0))),textStyles:c.COLOR===r?[]:t.map((t=>({...u(t,a),...p(t.content)}))).filter((t=>!s(t,o)))}}function x(t,o){return{colors:t.map((t=>{let{backgroundColor:o}=t;return o||null})).filter((t=>t&&!g(t,o,!1)))}}function k(t,o){return{colors:[t.backgroundColor].filter((t=>t&&!g(t,o,!1)))}}function S(t,o){return o.length>0&&o.every((o=>{let{type:r}=o;return t===r}))}export{S as areAllType,g as findMatchingColor,s as findMatchingStylePreset,d as generatePresetStyle,k as getPagePreset,x as getShapePresets,p as getTextInlineStyles,b as getTextPresets};
