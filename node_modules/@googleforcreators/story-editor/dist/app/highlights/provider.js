/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react");require("prop-types"),require("../../constants/fonts.js"),require("../../constants/multipleValue.js"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("@googleforcreators/elements"),require("../story/context.js"),require("@googleforcreators/migration"),require("@googleforcreators/templates"),require("../config/context.js"),require("../api/context.js"),require("../history/historyProvider.js"),require("../history/context.js"),require("../story/actions/useSaveStory.js"),require("clone-deep"),require("../story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../story/storyTriggers/storyTriggersProvider.js"),require("../story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../story/storyTriggers/storyEvents/onPageAddedRegister.js");var t=require("../story/useStory.js"),s=require("./context.js"),o=require("./states.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=i(e);module.exports=function HighlightsProvider(e){let{children:i}=e;const[a,l]=r.useState({}),{setSelectedElementsById:n,setCurrentPage:c}=t((e=>{let{actions:r}=e;return{setSelectedElementsById:r.setSelectedElementsById,setCurrentPage:r.setCurrentPage}})),g=r.useCallback((e=>{let{elementId:r,elements:t,pageId:s}=e;s&&c({pageId:s}),Array.isArray(t)?n({elementIds:t.map((e=>{let{id:r}=e;return r}))}):r&&n({elementIds:[r]})}),[c,n]),d=r.useCallback((e=>{let{elements:r,elementId:t,pageId:s,highlight:i}=e;if((r||t||s)&&g({elements:r,elementId:t,pageId:s}),i){const{tab:e,section:r,...t}=o.STATES[i];l({[i]:{...t,showEffect:!0},tab:e,section:r})}}),[g]),y=r.useCallback((()=>l({})),[l]),q=r.useCallback((e=>l((r=>({[e]:{...r[e],showEffect:!1}})))),[]),f=r.useMemo((()=>({setHighlights:d,onFocusOut:y,cancelEffect:q,...a})),[q,y,d,a]);return u.default.createElement(s.Provider,{value:f},i)};
