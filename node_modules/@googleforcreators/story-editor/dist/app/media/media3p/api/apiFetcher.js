/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={LIST_MEDIA:"/v1/media",LIST_CATEGORIES:"/v1/categories",REGISTER_USAGE:"/v1/media:registerUsage"},t={RELEVANCE:"relevance",LATEST:"latest"},a={TRENDING:"trending"};function r(e,t){if(!(null==t||Object.values(e).indexOf(t.toLowerCase())>-1))throw new Error("Invalid order_by: "+t)}function n(e){if(!(null==e||e>0))throw new Error("Invalid page_size: "+e)}var s=new class ApiFetcher{async listMedia(){let{languageCode:a=null,filter:s=null,orderBy:l=null,pageSize:o=null,pageToken:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){r(t,e)}(l),await n(o);const h=new URLSearchParams([["language_code",a],["filter",s],["order_by",l],["page_size",o],["page_token",i]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:h,path:e.LIST_MEDIA})}async listCategories(){let{filter:t=null,orderBy:s=null,pageSize:l=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){r(a,e)}(s),await n(l);const o=new URLSearchParams([["filter",t],["order_by",s],["page_size",l]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:o,path:e.LIST_CATEGORIES})}async registerUsage(t){let{registerUsageUrl:a}=t;await function(t){if(!t||!t.includes(e.REGISTER_USAGE))throw new Error("Invalid url: "+t)}(a),await this.fetchUrl({url:new URL(a),method:"POST"})}fetchPath(e){let{path:t,params:a,method:r}=e;const n=new URL("https://media3p.googleapis.com"+t);return a.forEach(((e,t)=>{n.searchParams.append(t,e)})),this.fetchUrl({url:n,method:r})}async fetchUrl(e){let{url:t,method:a}=e;t.searchParams.append("key","AIzaSyDqgPsZ0VnxAuakmX7bjnzmNQsE7Drlvk0");const r=await window.fetch(t.href,{method:a??"GET"});if(!r.ok)throw new Error("Obtained an error from the "+t.pathname+" call, statusCode: "+r.status+", statusText: "+r.statusText);return r.json()}};exports.API_DOMAIN="https://media3p.googleapis.com",exports.Paths=e,exports.default=s;
