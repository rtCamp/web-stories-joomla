/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("./utils.js");module.exports=function(t,n){let{elementId:s,position:i}=n;if(null===s&&1!==t.selection.length)return t;const r=null!==s?s:t.selection[0],l=t.pages.findIndex((e=>{let{id:n}=e;return n===t.current})),o=t.pages[l];if(o.elements.length<3)return t;const u=o.elements.findIndex((e=>{let{id:t}=e;return t===r}));if(-1===u||o.elements[0].id===r)return t;const c=o.elements.length-1,m=e.getAbsolutePosition({currentPosition:u,minPosition:1,maxPosition:c,desiredPosition:i});if(u===m)return t;const d=e.moveArrayElement(o.elements,u,m),g=[...t.pages.slice(0,l),{...o,elements:d},...t.pages.slice(l+1)];return{...t,pages:g}};
