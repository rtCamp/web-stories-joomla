/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react");require("prop-types");var u=require("./context.js"),t=require("./reduction.js"),o=require("./keyBindings.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=c(e);module.exports=function EditLayerFocusManager(e){let{children:c}=e;const[a,s]=r.useReduction(t.INITIAL_STATE,t.default),i=r.useRef(a);i.current=a;const l=r.useCallback((e=>{let{groupId:r,cleanup:u}=e;const t=i.current.focusGroups?.[r]?.[0];if(t){const[,e]=t;e.focus()}s.setActiveGroup({groupId:r,cleanup:u})}),[s,i]),p=r.useCallback((()=>{i.current.cleanup?.(),s.clearActiveGroup()}),[s,i]),d=a.focusGroups[a.activeGroupKey];return n.default.createElement(u.Provider,{value:{enterFocusGroup:l,exitCurrentFocusGroup:p,actions:s}},d?.map((e=>{let[r,u]=e;return u&&n.default.createElement(o,{key:r,uuid:r,node:u,activeFocusGroup:d,exitCurrentFocusGroup:p})})),c)};
