/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react");require("prop-types");var t=require("@googleforcreators/patterns"),o=require("@googleforcreators/design-system"),a=require("@googleforcreators/i18n"),l=require("./currentColorPicker.js"),n=require("./gradientPicker.js"),s=require("./header.js"),u=require("./patternTypePicker.js"),c=require("./useColor.js"),i=require("./addCustomColor.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(e);module.exports=function CustomColorPicker(e){let{color:d,allowsGradient:f,allowsOpacity:C,handleColorChange:S,handleClose:E,hideCustomPicker:g,allowsSavedColors:m,hasEyedropper:T}=e;const{state:{type:y,stops:q,currentStopIndex:v,currentColor:h,generatedColor:k},actions:{load:A,updateCurrentColor:b,reverseStops:j,selectStop:w,addStopAt:R,removeCurrentStop:I,rotateClockwise:P,moveCurrentStopBy:B,setToSolid:O,setToGradient:_}}=c(),G=r.useRef(!0);r.useEffect((()=>()=>{G.current=!1}),[]),r.useEffect((()=>{k&&S(k)}),[S,k]),r.useEffect((()=>{A(d||t.createSolid(0,0,0))}),[d,A]);const N=r.useCallback((e=>{b(e),!G.current&&e?.rgb&&S({color:e.rgb})}),[b,S]);return p.default.createElement(p.default.Fragment,null,p.default.createElement(s,{handleClose:E},p.default.createElement(o.Button,{"aria-label":a.__("Go back","web-stories"),onClick:g,type:o.BUTTON_TYPES.TERTIARY,size:o.BUTTON_SIZES.SMALL,variant:o.BUTTON_VARIANTS.SQUARE},p.default.createElement(o.Icons.ArrowLeft,null))),f&&p.default.createElement(u,{type:y,setToGradient:_,setToSolid:O}),"solid"!==y&&p.default.createElement(n,{stops:q,currentStopIndex:v,onSelect:w,onReverse:j,onAdd:R,onDelete:I,onRotate:P,onMove:B,type:y}),p.default.createElement(l,{color:h,onChange:N,showOpacity:C,hasEyedropper:T}),m&&p.default.createElement(i,{color:k||d,onSave:g}))};
