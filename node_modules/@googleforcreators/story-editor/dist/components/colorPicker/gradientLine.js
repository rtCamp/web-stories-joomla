/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react");require("prop-types");var r=require("styled-components"),o=require("@googleforcreators/i18n"),n=require("@googleforcreators/patterns"),i=require("@googleforcreators/design-system"),s=require("./pointer.js"),a=require("./gradientStop.js"),p=require("./useKeyMoveStop.js"),l=require("./useKeyAddStop.js"),u=require("./useKeyDeleteStop.js"),d=require("./useKeyFocus.js"),c=require("./usePointerAddStop.js"),f=require("./usePointerMoveStop.js"),g=require("./constants.js");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var y=m(e),I=m(r);const _=I.default.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],i.themeHelpers.transparentBg,g.LINE_LENGTH,g.LINE_WIDTH),q=I.default.div.attrs((e=>{let{stops:t}=e;return{style:n.generatePatternStyles({type:"linear",stops:t,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),h=I.default(s).attrs((e=>{let{x:t}=e;return{style:{left:`${t}px`},offsetX:-g.LINE_WIDTH/2}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],g.LINE_WIDTH-2,g.LINE_WIDTH-2);module.exports=function GradientLine(e){let{stops:r,currentStopIndex:n,onSelect:i,onAdd:m,onDelete:I,onMove:E}=e;const L=t.useRef();p(L,E),l(L,m,r,n),u(L,I);const x=d(L,r,n);f(L,E);const N=c(L,m);return y.default.createElement(_,{ref:L,"aria-label":o.__("Gradient line","web-stories"),tabIndex:"-1"},y.default.createElement(q,{stops:r}),r.map(((e,t)=>{let{position:r,color:o}=e;return y.default.createElement(a,{ref:e=>x[t].current=e,key:t,index:t,isSelected:t===n,position:r,onSelect:i,color:{color:o}},y.default.createElement(s,{offsetX:-g.LINE_WIDTH/2}))})),N&&y.default.createElement(h,{"aria-label":o.sprintf(
/* translators: %d: stop percentage */
o.__("Temporary gradient stop at %d%%","web-stories"),Math.round(N/g.LINE_LENGTH*100)),x:N}))};
