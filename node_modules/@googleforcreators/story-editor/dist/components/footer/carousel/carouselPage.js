/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("styled-components");require("prop-types");var r=require("@googleforcreators/i18n");require("../../reorderable/reorderable.js");var a=require("../../reorderable/reorderableItem.js"),i=require("../../reorderable/reorderableSeparator.js");require("@googleforcreators/react"),require("../../reorderable/context.js");var n=require("../pagepreview/index.js"),l=require("./useCarousel.js"),o=require("./constants.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=s(e),p=s(t);const u=p.default.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),o.THUMBNAIL_LINE_WIDTH),d=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),f=p.default(i).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:r}=e;return t+r}),(e=>{let{height:t}=e;return t}),d,d,(e=>{let{width:t,margin:r}=e;return(t+r+o.THUMBNAIL_LINE_WIDTH)/2}),d,(e=>{let{margin:t}=e;return(t-o.THUMBNAIL_LINE_WIDTH)/2}),d,(e=>{let{width:t,margin:r}=e;return r+t/2}),d),c=p.default(a).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:r}=e;return 0===r?t:0}));module.exports=function CarouselPage(e){let{pageId:t,index:a}=e;const{pageThumbWidth:i,pageThumbHeight:o,pageThumbMargin:s,clickPage:p,setPageRef:h,page:m,isCurrentPage:b,hasMultiplePages:y}=l((e=>{let{state:{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:i,numPages:n,pages:l,currentPageId:o},actions:{clickPage:s,setPageRef:g}}=e;return{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:i,clickPage:s,setPageRef:g,page:l.find((e=>{let{id:r}=e;return r===t})),isCurrentPage:t===o,hasMultiplePages:n>1}}));return m&&m.id?g.default.createElement(d,{ref:e=>h(m,e),"data-testid":`carousel-page-preview-${t}`},0===a&&g.default.createElement(f,{position:0,width:i,height:o,margin:s},g.default.createElement(u,{height:o})),g.default.createElement(c,{position:a,margin:s},g.default.createElement(n,{tabIndex:b&&y?0:-1,onClick:()=>p(m),role:"option","data-page-id":m.id,label:b?r.sprintf(
/* translators: %s: page number. */
r.__("Page %s (current page)","web-stories"),a+1):r.sprintf(
/* translators: %s: page number. */
r.__("Go to page %s","web-stories"),a+1),isActive:b,page:m,width:i,height:o,isInteractive:y})),g.default.createElement(f,{position:a+1,width:i,height:o,margin:s},g.default.createElement(u,{height:o}))):null};
