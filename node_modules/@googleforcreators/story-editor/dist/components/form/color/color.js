/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react"),n=require("styled-components"),l=require("prop-types"),r=require("@googleforcreators/i18n"),a=require("@googleforcreators/patterns"),o=require("@googleforcreators/design-system");require("../../../constants/fonts.js");var i=require("../../../constants/multipleValue.js"),s=require("../../eyedropper/index.js"),c=require("../../tooltip/tooltip.js"),u=require("../../panels/shared/styles.js"),p=require("./applyOpacityChange.js"),d=require("./opacityInput.js"),T=require("./colorInput.js"),f=require("./constants.js");function I(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=I(e),m=I(n),E=I(l);const h=n.css(["display:flex;align-items:center;"]),_=m.default.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],h,(e=>{let{isInDesignMenu:t}=e;return t?6:8}),(e=>{let{width:t}=e;return t?`${t}px`:"inherit"}));_.propTypes={isInDesignMenu:E.default.bool,width:E.default.number};const y=m.default.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],h,(e=>{let{isInDesignMenu:t}=e;return t?0:6})),C=m.default.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),w=m.default.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(e=>{let{hasInputs:t}=e;return t&&"width: calc(53% - 10px);"})),O=m.default.div.withConfig({displayName:"color__OpacityWrapper",componentId:"sc-c7i660-4"})(["width:",";"],(e=>{let{isInDesignMenu:t}=e;return t?"calc(39% - 10px)":"calc(47% - 10px)"})),M=m.default(o.Button).attrs({variant:o.BUTTON_VARIANTS.SQUARE,type:o.BUTTON_TYPES.TERTIARY,size:o.BUTTON_SIZES.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-5"})(["",";"],u.focusStyle),P=r.__("Color input","web-stories"),S=t.forwardRef((function Color(e,n){let{onChange:l,allowsGradient:u=!1,allowsOpacity:I=!0,allowsSavedColors:m=!1,value:E=null,label:h=null,containerLabelBase:S=P,changedStyle:A=null,hasEyedropper:L=!1,pickerHasEyedropper:N=!0,maxHeight:v=null,shouldCloseOnSelection:x=!1,allowsSavedColorDeletion:b=!0,pickerPlacement:q=o.PLACEMENT.RIGHT_START,isInDesignMenu:D=!1,hasInputs:B=!0,width:j,tabIndex:R}=e;const U=t.useCallback((e=>l(p(E,e))),[E,l]),k=r.sprintf(
/* translators: 1: the input section in the editor. 2: color input label name. */
r.__("%1$s: %2$s","web-stories"),S,h),G=E!==i.MULTIPLE_VALUE&&Boolean(a.getPreviewText(E))&&B,{initEyedropper:H}=s({onChange:e=>l({color:e})}),V=r.__("Pick a color from canvas","web-stories"),F=D||L?o.TOOLTIP_PLACEMENT.BOTTOM:o.TOOLTIP_PLACEMENT.BOTTOM_START,W=j&&E===i.MULTIPLE_VALUE;return g.default.createElement(_,{"aria-label":k,isInDesignMenu:D,width:!W&&j?j:null},L&&g.default.createElement(c,{title:V,hasTail:!0,placement:D?o.TOOLTIP_PLACEMENT.BOTTOM:o.TOOLTIP_PLACEMENT.BOTTOM_START},g.default.createElement(M,{tabIndex:R,"aria-label":V,onClick:H(),onPointerEnter:H(!1)},g.default.createElement(o.Icons.Pipette,null))),g.default.createElement(y,{isInDesignMenu:D},g.default.createElement(w,{hasInputs:B},g.default.createElement(T,{ref:n,tabIndex:R,onChange:l,value:E,label:h,changedStyle:A,pickerPlacement:q,hasInputs:B,isInDesignMenu:D,spacing:D?f.SPACING.FLOATING_MENU:f.SPACING.DEFAULT_SIDEBAR,tooltipPlacement:F,pickerProps:{allowsGradient:u,allowsOpacity:I,allowsSavedColors:m,hasEyedropper:N,allowsSavedColorDeletion:b,maxHeight:v,shouldCloseOnSelection:x}})),I&&G&&g.default.createElement(g.default.Fragment,null,g.default.createElement(C,null),g.default.createElement(O,{isInDesignMenu:D},g.default.createElement(d,{tabIndex:R,value:E,onChange:U,isInDesignMenu:D})))))}));module.exports=S;
