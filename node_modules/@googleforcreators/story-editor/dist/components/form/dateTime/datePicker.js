/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react"),r=require("styled-components");require("prop-types");var a=require("@googleforcreators/i18n"),n=require("@googleforcreators/design-system"),o=require("./calendarWrapper.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var i=l(e),u=l(r);const s=t.lazy((()=>Promise.resolve().then((function(){return c(require("react-calendar"))})))),d=u.default.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-0"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);module.exports=function DatePicker(e){let{currentDate:r,onChange:l,onViewChange:c}=e;const u=t.useRef(),f=t.useMemo((()=>new Date(r)),[r]),b=t.useCallback((e=>{e.setHours(f.getHours()),e.setMinutes(f.getMinutes()),l(e.toISOString(),!0)}),[f,l]),p=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(u.current){const t=[...u.current.querySelectorAll(".react-calendar__navigation button")];t[0].tabIndex="0",t.shift();for(const e of t)e.tabIndex="-1";const r=[...u.current.querySelectorAll(".react-calendar__viewContainer button")];let a=!1;for(const t of r)t.classList.contains("react-calendar__tile--now")?(t.tabIndex="0",e&&t.focus(),a=!0):t.tabIndex="-1";a||(r[0].tabIndex="0",r[0].focus())}}),[u]);return t.useEffect((()=>{const e=setTimeout((()=>{p()}));return()=>{clearTimeout(e)}}),[p]),i.default.createElement(t.Suspense,{fallback:i.default.createElement(d,null,i.default.createElement(n.CircularProgress,null))},i.default.createElement(o,{ref:u},i.default.createElement(s,{value:f,onChange:b,onViewChange:c,onActiveStartDateChange:()=>p(!0),nextAriaLabel:a._x("Next","This label can apply to next month, year and/or decade","web-stories"),prevAriaLabel:a._x("Previous","This label can apply to previous month, year and/or decade","web-stories"),next2AriaLabel:a._x("Jump forward","This label can apply to month, year and/or decade","web-stories"),prev2AriaLabel:a._x("Jump backwards","This label can apply to month, year and/or decade","web-stories")})))};
