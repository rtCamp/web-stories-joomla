/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("styled-components");require("prop-types");var r=require("polished"),a=require("@googleforcreators/react"),o=require("@googleforcreators/i18n"),n=require("@googleforcreators/design-system"),i=require("../../../utils/useFocusTrapping.js"),s=require("../../../utils/useRovingTabIndex/index.js"),u=require("./timePicker.js"),l=require("./datePicker.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=c(e),f=c(t);const m=f.default.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["border-radius:4px;box-shadow:0 3px 30px rgba(25,30,35,0.1);border:1px solid ",";background-color:",";width:100%;padding:4px;"],(e=>{let{theme:t}=e;return r.rgba(t.colors.standard.black,.2)}),(e=>{let{theme:t}=e;return t.colors.standard.white})),g=f.default(n.Button).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["color:#006edc;margin:5px 0;"]);module.exports=function DateTime(e){let{value:t,onChange:r,onViewChange:c,is12Hour:f=!0,forwardedRef:p,onClose:b,canReset:h=!1}=e;const w=t?new Date(t):new Date,q=w.getHours(),[x,C]=a.useState({minutes:w.getMinutes(),am:q<12?"AM":"PM",hours:f?q%12||12:q,date:w}),v=a.useRef(document.activeElement),y=a.useCallback((e=>{v.current&&v.current.focus(),b(e)}),[b]);return n.useKeyDownEffect(p,{key:["esc"],editable:!0},y),s.default({ref:p}),i({ref:p}),d.default.createElement(m,{ref:p},d.default.createElement(u,{localData:x,setLocalData:C,onChange:r,is12Hour:f}),d.default.createElement(l,{currentDate:t,onChange:r,onViewChange:c}),h&&d.default.createElement(g,{size:n.BUTTON_SIZES.SMALL,onClick:()=>{r(null),b()},"aria-label":o.__("Reset publish time","web-stories")},o.__("Reset","web-stories")))};
