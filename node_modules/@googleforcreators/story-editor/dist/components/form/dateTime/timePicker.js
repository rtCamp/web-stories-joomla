/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("styled-components");require("prop-types");var o=require("@googleforcreators/i18n"),n=require("@googleforcreators/react"),r=require("./timeZone.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=i(e),s=i(t);const l=s.default.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),d=s.default.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),u=s.default.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),c=s.default.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),p=t.css(["min-height:30px;box-shadow:0 0 0 transparent;transition:box-shadow 0.1s linear;border-radius:4px;border:1px solid #006edc;height:28px;vertical-align:middle;background-color:",";color:#32373c;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),m=s.default.input.withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})([""," padding:0;margin-right:4px;text-align:center;width:50%;max-width:50px;::-webkit-inner-spin-button,::-webkit-outer-spin-button{margin:0;appearance:none;}"],p),f=s.default.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),g=s.default.button.withConfig({displayName:"timePicker__Button",componentId:"sc-14og2kb-6"})(["display:inline-flex;text-decoration:none;font-size:13px;margin:0;border:0;cursor:pointer;transition:box-shadow 0.1s linear;padding:0 10px;line-height:2;height:30px;border-radius:3px;white-space:nowrap;border-width:1px;border-style:solid;color:#006edc;border-color:#006edc;background:#f3f5f6;&:focus{outline:2px solid transparent;background:#f3f5f6;color:rgb(0,93,140);border-color:",";box-shadow:0 0 0 1px ",";text-decoration:none;}",""],(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{isToggled:t}=e;return t&&"\n  background: #edeff0;\n  border-color: #8f98a1;\n  box-shadow: inset 0 2px 5px -3px #555d66;\n  "})),b=s.default.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-7"})(["flex-basis:100%;"]),h=s.default(g).withConfig({displayName:"timePicker__AMButton",componentId:"sc-14og2kb-8"})(["margin-right:-1px;border-radius:3px 0 0 3px;"]),x=s.default(g).withConfig({displayName:"timePicker__PMButton",componentId:"sc-14og2kb-9"})(["margin-left:-1px;border-radius:0 3px 3px 0;"]);module.exports=function TimePicker(e){let{onChange:t,is12Hour:i,localData:s,setLocalData:p}=e;const g=e=>t=>{p({...s,[e]:parseInt(t.target.value)})},k=()=>i?12:23,_=()=>i?1:0,w=e=>{const{am:t}=s;return i?"AM"===t?e%12:(e%12+12)%24:e},y=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p({...s,...o,date:e}),t(e.toISOString())},I=e=>()=>{const{am:t,date:o,hours:n}=s;if(t===e)return;const r=o;"PM"===e?r.setHours((n%12+12)%24):r.setHours(n%12),y(r,{am:e})},P=n.useRef();n.useEffect((()=>{P.current.focus()}),[]);const C="AM"===s.am,N="PM"===s.am;return a.default.createElement(l,null,a.default.createElement(d,null,a.default.createElement(u,null,o.__("Time","web-stories")),a.default.createElement(c,null,a.default.createElement(b,null,a.default.createElement(m,{ref:P,"aria-label":o.__("Hours","web-stories"),type:"number",step:1,min:_(),max:k(),value:parseInt(s.hours),onChange:g("hours"),onBlur:()=>{const{hours:e,date:t}=s,o=parseInt(e);if(!(isNaN(o)||o<_()||o>k())&&t.getHours()!==w(e)){const o=t;o.setHours(w(e)),y(o)}}}),a.default.createElement(f,null,":"),a.default.createElement(m,{"aria-label":o.__("Minutes","web-stories"),type:"number",min:0,max:59,value:parseInt(s.minutes),onChange:g("minutes"),onBlur:()=>{const{minutes:e,date:t}=s,o=parseInt(e);if(!(isNaN(o)||o<0||o>59)&&t.getMinutes()!==e){const o=t;o.setMinutes(e),y(o)}}})),i&&a.default.createElement(b,null,a.default.createElement(h,{"aria-pressed":C,type:"button",isToggled:C,onClick:I("AM")},o.__("AM","web-stories")),a.default.createElement(x,{"aria-pressed":N,type:"button",isToggled:N,tabIndex:"-1",onClick:I("PM")},o.__("PM","web-stories"))),a.default.createElement(r,{date:s?.date}))))};
