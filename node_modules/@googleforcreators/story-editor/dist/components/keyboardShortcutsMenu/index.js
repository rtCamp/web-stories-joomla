/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("styled-components"),r=require("@googleforcreators/i18n"),o=require("@googleforcreators/design-system"),n=require("@googleforcreators/react"),s=require("../../constants/zIndex.js"),u=require("../../utils/keyboardOnlyOutline.js"),a=require("../secondaryPopup/index.js"),i=require("../toggleButton/index.js"),c=require("../directionAware/index.js"),l=require("../footer/constants.js"),d=require("./shortcutMenu.js"),g=require("./constants.js");require("prop-types"),require("@googleforcreators/tracking"),require("./keyboardShortcutsMenuContext/context.js");var y=require("./keyboardShortcutsMenuContext/useKeyboardShortcutsMenu.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=f(e),b=f(t);const h=b.default(i.ToggleButton).withConfig({displayName:"keyboardShortcutsMenu__StyledToggleButton",componentId:"sc-1nngfyy-0"})(["padding-left:","px;padding-right:","px;width:auto;display:block;background-color:",";"],l.KEYBOARD_SHORTCUTS_PADDING,l.KEYBOARD_SHORTCUTS_PADDING,(e=>{let{theme:t}=e;return t.colors.bg.primary})),_=b.default.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-1"})(["z-index:",";"],s.Z_INDEX_FOOTER),m=b.default(o.Icons.Keyboard).withConfig({displayName:"keyboardShortcutsMenu__MainIcon",componentId:"sc-1nngfyy-2"})(["height:32px;width:auto;display:block;"]);module.exports=function KeyboardShortcutsMenu(){const e=n.useRef(),t=n.useRef(),{close:s,toggle:i,isOpen:l}=y.useKeyboardShortcutsMenu((e=>{let{actions:{close:t,toggle:r},state:{isOpen:o}}=e;return{close:t,toggle:r,isOpen:o}}));return n.useEffect((()=>{u.isKeyboardUser()&&!l&&e?.current?.focus?.()}),[l]),o.useGlobalKeyDownEffect(g.TOGGLE_SHORTCUTS_MENU,i,[i]),n.useFocusOut(t,s,[s]),p.default.createElement(c,null,p.default.createElement(_,{ref:t},p.default.createElement(a.default,{popupId:"keyboard_shortcut_menu",isOpen:l,ariaLabel:r.__("Keyboard Shortcuts","web-stories")},p.default.createElement(d,{toggleMenu:i})),p.default.createElement(h,{ref:e,isOpen:l,"aria-owns":"keyboard_shortcut_menu",onClick:i,"aria-label":r.__("Keyboard Shortcuts","web-stories"),label:r.__("Keyboard Shortcuts","web-stories"),MainIcon:m,shortcut:"mod+/"})))};
