/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react"),o=require("@googleforcreators/i18n"),t=require("@googleforcreators/design-system");require("prop-types"),require("@googleforcreators/templates"),require("../../../../../app/config/context.js"),require("../../../../../app/api/context.js"),require("../../../../../app/currentUser/context.js");var i=require("../../../../../app/currentUser/useCurrentUser.js");require("@googleforcreators/media"),require("@googleforcreators/tracking"),require("../../../../../constants/fonts.js"),require("../../../../../constants/multipleValue.js"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("@googleforcreators/elements"),require("../../../../../app/story/context.js"),require("@googleforcreators/migration"),require("../../../../../app/history/historyProvider.js"),require("../../../../../app/history/context.js"),require("../../../../../app/story/actions/useSaveStory.js"),require("clone-deep"),require("../../../../../app/story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../../../../../app/story/storyTriggers/storyTriggersProvider.js"),require("../../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js"),require("../../../../../app/media/useUploadMedia.js"),require("@googleforcreators/patterns"),require("../../../../../utils/generateBlurhash.worker.js"),require("../../../../../app/media/media3p/providerConfiguration.js"),require("../../../../../app/media/utils/useFFmpeg.js"),require("../../../../../app/media/media3p/api/context.js"),require("../../../../../app/media/local/constants.js"),require("../../../../../app/media/media3p/providerReducer.js"),require("../../../../../app/media/context.js");var s=require("../../../../../app/media/local/useLocalMedia.js"),a=require("../../../../dialog/dialog.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=u(e);const p=t.LOCAL_STORAGE_PREFIX.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;module.exports=function VideoOptimizationDialog(){const{isTranscoding:e}=s((e=>{let{state:{isTranscoding:r}}=e;return{isTranscoding:r}})),[u,l]=r.useState(Boolean(t.localStore.getItemByKey(p))),{updateCurrentUser:c}=i((e=>{let{actions:r}=e;return{updateCurrentUser:r.updateCurrentUser}})),d=r.useCallback((e=>{l(e),t.localStore.setItemByKey(p,e)}),[]),g=r.useCallback((()=>{c({mediaOptimization:!1}),d(!0)}),[c,d]),q=r.useCallback((()=>{d(!0)}),[d]),m=o.__("Video optimization in progress","web-stories"),y=o.__("This process canâ€™t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return n.default.createElement(a,{isOpen:e&&!u,onClose:q,title:m,onSecondary:g,secondaryText:o.__("Disable optimization","web-stories"),onPrimary:q,primaryText:o.__("Sounds good","web-stories")},n.default.createElement(t.Text,{size:t.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},y))};
