/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react");require("prop-types");var r=require("styled-components"),i=require("@googleforcreators/stickers"),o=require("@googleforcreators/design-system"),a=require("@googleforcreators/units"),n=require("../../useLibrary.js"),s=require("../shared/libraryMoveable.js"),l=require("../shared/insertionOverlay.js"),d=require("./shapePreview.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(e),E=c(r),h=c(i);const p=E.default(o.Button).attrs({size:o.BUTTON_SIZES.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),o.ThemeGlobals.FOCUS_VISIBLE_SELECTOR,o.ThemeGlobals.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return o.themeHelpers.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),f=E.default.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),m=E.default.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));module.exports=function StickerPreview(e){let{stickerType:r,index:i}=e;const{insertElement:o}=n((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:c,dataToEditorY:E}=a.useUnits((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),T=h.default[r],g=T.aspectRatio,y=t.useMemo((()=>({width:d.DEFAULT_ELEMENT_WIDTH*g,height:d.DEFAULT_ELEMENT_WIDTH,sticker:{type:r}})),[g,r]),[w,_]=t.useState(!1),v=()=>_(!0),b=()=>_(!1),L=T.svg;return u.default.createElement(p,{"data-testid":`library-sticker-${r}`,onClick:()=>o("sticker",{width:d.DEFAULT_ELEMENT_WIDTH,sticker:{type:r}}),tabIndex:0===i?0:-1,onPointerEnter:v,onFocus:v,onPointerLeave:b,onBlur:b},u.default.createElement(f,null,u.default.createElement(L,{style:{height:g<.955?"60%":"auto",width:g<.955?"auto":"60%"}}),w&&u.default.createElement(l,null),u.default.createElement(s,{type:"sticker",elementProps:y,cloneElement:m,cloneProps:{width:c(d.DEFAULT_ELEMENT_WIDTH*(g<1?g:1)),height:E(d.DEFAULT_ELEMENT_WIDTH/(g<1?1:g)),children:u.default.createElement(L,{style:{height:"auto",width:"100%"}})}})))};
