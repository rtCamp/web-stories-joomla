/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@googleforcreators/react");require("prop-types");var r=require("styled-components"),o=require("@googleforcreators/i18n"),i=require("@googleforcreators/design-system"),n=require("@googleforcreators/animation");require("../../../../app/config/context.js");var a=require("../../../../app/config/useConfig.js"),s=require("../../../form/shared/useRadioNavigation.js");function T(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=T(e),_=T(r);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l.apply(this,arguments)}const I=_.default(i.Button).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:o,theme:i}=e;return t&&!o&&r.css(["background-color:",";"],i.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case n.DIRECTION.RIGHT_TO_LEFT:return"rotate(270deg)";case n.DIRECTION.TOP_TO_BOTTOM:return"rotate(180deg)";case n.DIRECTION.LEFT_TO_RIGHT:return"rotate(90deg)";case n.ROTATION.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case n.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case n.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case n.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case n.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),O=_.default((e=>{let{className:t,direction:r,...o}=e;return c.default.createElement(I,l({variant:i.BUTTON_VARIANTS.SQUARE,type:i.BUTTON_TYPES.TERTIARY,size:i.BUTTON_SIZES.SMALL,className:t,direction:r},o),[...Object.values(n.DIRECTION),...Object.values(n.SCALE_DIRECTION)].includes(r)&&c.default.createElement(i.Icons.ArrowUp,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),E=_.default.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),d=_.default.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),u=_.default.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case n.DIRECTION.RIGHT_TO_LEFT:return r.css(["top:50%;right:","px;transform:translateY(-50%);"],3);case n.DIRECTION.TOP_TO_BOTTOM:return r.css(["top:","px;left:50%;transform:translateX(-50%);"],3);case n.DIRECTION.LEFT_TO_RIGHT:return r.css(["top:50%;left:","px;transform:translateY(-50%);"],3);case n.ROTATION.COUNTER_CLOCKWISE:return r.css(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case n.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return r.css(["bottom:","px;left:","px;"],3,3);case n.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return r.css(["top:","px;left:","px;"],3,3);case n.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return r.css(["top:","px;right:","px;"],3,3);case n.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return r.css(["bottom:","px;right:","px;"],3,3);default:return r.css(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),C=_.default.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),p=_.default.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),L={[n.DIRECTION.RIGHT_TO_LEFT]:o._x("right to left","animation direction","web-stories"),[n.DIRECTION.LEFT_TO_RIGHT]:o._x("left to right","animation direction","web-stories"),[n.DIRECTION.TOP_TO_BOTTOM]:o._x("top to bottom","animation direction","web-stories"),[n.DIRECTION.BOTTOM_TO_TOP]:o._x("bottom to top","animation direction","web-stories"),[n.ROTATION.CLOCKWISE]:o._x("clockwise","rotation direction","web-stories"),[n.ROTATION.COUNTER_CLOCKWISE]:o._x("counterclockwise","rotation direction","web-stories"),[n.SCALE_DIRECTION.SCALE_IN]:o._x("scale in","scale direction","web-stories"),[n.SCALE_DIRECTION.SCALE_OUT]:o._x("scale out","scale direction","web-stories")},R=e=>{switch(e){case n.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:case n.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return n.SCALE_DIRECTION.SCALE_IN;case n.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:case n.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return n.SCALE_DIRECTION.SCALE_OUT;default:return e}},N=e=>[...n.SCALE_DIRECTION_MAP.SCALE_IN,...n.SCALE_DIRECTION_MAP.SCALE_OUT].includes(e),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f(e)?.[0]},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=f(e);return t[t.length-1]},g=[n.DIRECTION.TOP_TO_BOTTOM,n.DIRECTION.RIGHT_TO_LEFT,n.DIRECTION.BOTTOM_TO_TOP,n.DIRECTION.LEFT_TO_RIGHT],m=[n.SCALE_DIRECTION.SCALE_IN_TOP_LEFT,n.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT,n.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT,n.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT],h=(e,t,r)=>{const o=r?t.reverse():t;return e.sort(((e,t)=>o.indexOf(e)-o.indexOf(t)))};exports.DirectionRadioInput=e=>{let{value:r,directions:T=[],onChange:_,disabled:l=[],tooltip:I}=e;const f=t.useRef(),{isRTL:D}=a(),b=t.useMemo((()=>{const e=[];if(T.includes(n.SCALE_DIRECTION.SCALE_OUT)||T.includes(n.SCALE_DIRECTION.SCALE_IN)){const t=[];T.includes(n.SCALE_DIRECTION.SCALE_OUT)&&t.push(...n.SCALE_DIRECTION_MAP.SCALE_OUT),T.includes(n.SCALE_DIRECTION.SCALE_IN)&&t.push(...n.SCALE_DIRECTION_MAP.SCALE_IN),e.push(...h(t,m,D))}else e.push(...h(T,g,D));return e}),[T,D]);return s(f),c.default.createElement(E,null,c.default.createElement(d,null),c.default.createElement(C,null,o.__("Which Direction?","web-stories")),c.default.createElement(p,{ref:f},b.map((e=>{const t=l?.includes(R(e));return c.default.createElement(u,{key:e,"aria-label":L[e],htmlFor:e,direction:e,disabled:t},c.default.createElement(i.Tooltip,{title:t?I:"",placement:N(e)?S(e):A(e)},c.default.createElement(O,{direction:e,selected:r===e||e?.includes(r),disabled:t,onClick:()=>_(R(e))})))}))))};
