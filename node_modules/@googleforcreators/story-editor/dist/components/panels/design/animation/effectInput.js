/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),t=require("@googleforcreators/react");require("prop-types");var r=require("styled-components"),a=require("@googleforcreators/i18n"),l=require("@googleforcreators/design-system"),o=require("@googleforcreators/animation"),n=require("../../shared/styles.js"),i=require("./directionRadioInput.js"),s=require("./constants.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=u(e),d=u(r);const p=r.css(["border-radius:0;border-color:"," transparent transparent transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),f=d.default(l.NumericInput).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],s.INPUT_HEIGHT,p,(e=>{let{theme:t}=e;return t.borders.radius.small})),m=d.default(l.DropDown).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&.",",&[","]{border-radius:",";}}"],p,p,l.ThemeGlobals.FOCUS_VISIBLE_SELECTOR,l.ThemeGlobals.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.borders.radius.small}));module.exports=function EffectInput(e){let{effectProps:r,effectConfig:l,field:s,onChange:u,disabledOptions:d,tooltip:p}=e;const I=t.useCallback((e=>u(e,!0)),[u]),g=l[s]??r[s].defaultValue,b=r[s].type===o.FIELD_TYPES.FLOAT;switch(r[s].type){case o.FIELD_TYPES.DROPDOWN:return c.default.createElement(m,{options:(r[s].values||[]).map((e=>{let{name:t,...r}=e;return{...r,label:t,disabled:d.includes(r.value)}})),placeholder:a.__("Select a value","web-stories"),ariaLabel:a.__("Select effect value","web-stories"),isKeepMenuOpenOnSelection:!1,selectedValue:g,onMenuItemClick:e=>u(e.target.value,!0)});case o.FIELD_TYPES.DIRECTION_PICKER:return c.default.createElement(i.DirectionRadioInput,{value:g,directions:r[s].values,onChange:I,disabled:d,tooltip:p});default:return c.default.createElement(f,{"aria-label":r[s].label,suffix:r[s].label,unit:r[s].unit,value:g,min:0,onChange:e=>u(b?parseFloat(e.target.value):parseInt(e.target.value),!0),isFloat:b,containerStyleOverride:n.inputContainerStyleOverride})}};
