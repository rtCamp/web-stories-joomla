/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");require("prop-types");var t=require("@googleforcreators/react"),o=require("styled-components"),r=require("@googleforcreators/i18n"),a=require("@googleforcreators/design-system"),l=require("@googleforcreators/masks"),i=require("../../../form/stackable/stackableGroup.js"),s=require("../../../form/stackable/stackableInput.js"),n=require("../../shared/useCommonObjectValue.js"),d=require("../../shared/styles.js"),u=require("../../../tooltip/tooltip.js");require("../../../../constants/fonts.js");var c=require("../../../../constants/multipleValue.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var L=f(e),m=f(o);const p={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},g=m.default.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),_=m.default.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),E=m.default(a.LockToggle).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],d.focusStyle),b=m.default(a.Icons.Corner).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),h=m.default(a.Icons.Corner).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),I=m.default(a.Icons.Corner).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);exports.DEFAULT_BORDER_RADIUS=p,exports.default=function RadiusControls(e){let{selectedElements:o,pushUpdateForObject:d}=e;const f=n(o,"borderRadius",p),m=o.every((e=>l.canSupportMultiBorder(e))),U=!0===f.locked,R=t.useCallback(((e,t)=>{d("borderRadius",U?{topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}:{[e]:t},p,!0)}),[d,U]),T=t.useCallback((e=>{const t=e?{locked:e,topLeft:f.topLeft,topRight:f.topLeft,bottomRight:f.topLeft,bottomLeft:f.topLeft}:{locked:e};d("borderRadius",t,p,!0)}),[d,f]);if(!m)return null;const y=U?r.__("Corner Radius","web-stories"):r.__("Top left corner radius","web-stories");return L.default.createElement(g,null,L.default.createElement(i,{locked:U},L.default.createElement(s,{suffix:L.default.createElement(b,null),value:f.topLeft===c.MULTIPLE_VALUE?"":f.topLeft,"aria-label":y,onChange:(e,t)=>R("topLeft",t),placeholder:f.topLeft===c.MULTIPLE_VALUE?c.MULTIPLE_DISPLAY_VALUE:"",isIndeterminate:f.topLeft===c.MULTIPLE_VALUE}),!U&&L.default.createElement(L.default.Fragment,null,L.default.createElement(s,{suffix:L.default.createElement(h,null),value:f.topRight===c.MULTIPLE_VALUE?"":f.topRight,"aria-label":r.__("Top right corner radius","web-stories"),onChange:(e,t)=>R("topRight",t),placeholder:f.topRight===c.MULTIPLE_VALUE?c.MULTIPLE_DISPLAY_VALUE:"",isIndeterminate:f.topRight===c.MULTIPLE_VALUE}),L.default.createElement(s,{value:f.bottomLeft===c.MULTIPLE_VALUE?"":f.bottomLeft,"aria-label":r.__("Bottom left corner radius","web-stories"),onChange:(e,t)=>R("bottomLeft",t),placeholder:f.bottomLeft===c.MULTIPLE_VALUE?c.MULTIPLE_DISPLAY_VALUE:"",suffix:L.default.createElement(a.Icons.Corner,null),isIndeterminate:f.bottomLeft===c.MULTIPLE_VALUE}),L.default.createElement(s,{value:f.bottomRight===c.MULTIPLE_VALUE?"":f.bottomRight,"aria-label":r.__("Bottom right corner radius","web-stories"),onChange:(e,t)=>R("bottomRight",t),placeholder:f.bottomRight===c.MULTIPLE_VALUE?c.MULTIPLE_DISPLAY_VALUE:"",suffix:L.default.createElement(I,null),isIndeterminate:f.bottomRight===c.MULTIPLE_VALUE}))),L.default.createElement(_,null,L.default.createElement(u,{title:r.__("Toggle consistent corner radius","web-stories"),key:f.locked.toString()},L.default.createElement(E,{isLocked:f.locked,onClick:()=>T(!f.locked),"aria-label":r.__("Toggle consistent corner radius","web-stories")}))))};
