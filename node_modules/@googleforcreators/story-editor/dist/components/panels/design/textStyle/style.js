/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react");require("prop-types");var r=require("styled-components"),t=require("@googleforcreators/react"),i=require("@googleforcreators/i18n"),l=require("@googleforcreators/design-system"),o=require("@googleforcreators/dom"),a=require("@googleforcreators/units");require("@googleforcreators/fonts"),require("../../../../constants/fonts.js");var n=require("../../../../constants/multipleValue.js");require("@googleforcreators/templates"),require("../../../../app/config/context.js"),require("../../../../app/api/context.js"),require("../../../../app/font/context.js");var s=require("../../../../app/font/useFont.js");require("../../../form/color/color.js"),require("../../../form/filterToggle/filterToggle.js"),require("../../../form/linkIcon.js"),require("../../../form/link.js"),require("../../../form/media.js"),require("@googleforcreators/media"),require("@googleforcreators/transform"),require("../../../dropTargets/provider.js"),require("../../../dropTargets/context.js"),require("../../../../app/history/historyProvider.js"),require("../../../../app/history/context.js"),require("@googleforcreators/tracking"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("@googleforcreators/elements"),require("../../../../app/story/context.js"),require("@googleforcreators/migration"),require("../../../../app/story/actions/useSaveStory.js"),require("clone-deep"),require("../../../../app/story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../../../../app/story/storyTriggers/storyTriggersProvider.js"),require("../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js"),require("../../../../app/media/useUploadMedia.js"),require("@googleforcreators/patterns"),require("../../../../utils/generateBlurhash.worker.js"),require("../../../../app/media/media3p/providerConfiguration.js"),require("../../../../app/media/utils/useFFmpeg.js"),require("../../../../app/media/media3p/api/context.js"),require("../../../../app/media/local/constants.js"),require("../../../../app/media/media3p/providerReducer.js"),require("../../../../app/media/context.js"),require("sat"),require("../../../../app/layout/context.js"),require("../../../../app/layout/useZoomSetting.js"),require("@googleforcreators/rich-text"),require("@googleforcreators/stickers"),require("../../../library/panes/text/textPresets.js"),require("../../../../app/canvas/context.js"),require("../../../../app/currentUser/context.js"),require("../../../../app/helpCenter/provider.js"),require("../../../../app/helpCenter/context.js"),require("../../../helpCenter/constants.js"),require("../../../../app/rightClickMenu/context.js");var u=require("../../../form/row.js");require("../../../form/switch.js"),require("../../../form/textArea.js");var c=require("../../../form/usePresubmitHandler.js");require("../../../form/dateTime/dateTime.js"),require("../../../form/required.js"),require("../../../form/radioGroup/index.js"),require("../../../form/select/select.js"),require("../../../form/hierarchical/index.js");var g=require("../../shared/styles.js");require("../../shared/flipControls.js"),require("../../shared/linkRelations.js");var d=require("../../shared/getCommonValue.js"),p=require("./useRichTextFormatting.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=f(e),q=f(r);function j(){return j=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},j.apply(this,arguments)}const y={MIN:.5,MAX:10},h={MIN:0,MAX:300},T=q.default(l.NumericInput).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),E=q.default.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),x=q.default(l.ToggleButton).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],g.focusStyle);function Toggle(e){return m.default.createElement(x,j({size:l.BUTTON_SIZES.SMALL,variant:l.BUTTON_VARIANTS.SQUARE},e))}module.exports=function StylePanel(e){let{selectedElements:r,pushUpdate:f}=e;const{actions:{maybeEnqueueFontStyle:q}}=s(),j=d(r,"textAlign"),x=d(r,"lineHeight"),{textInfo:{isBold:I,isItalic:_,isUnderline:L,isUppercase:A,letterSpacing:v,fontWeight:b},handlers:{handleClickBold:C,handleClickItalic:U,handleClickUnderline:S,handleClickUppercase:k,handleSetLetterSpacing:w}}=p(r,f),M=t.useCallback(((e,r)=>w(a.clamp(r,h))),[w]);c((e=>{let{lineHeight:r}=e;return{lineHeight:a.clamp(r,y)}}),[]);const P=t.useCallback((e=>()=>{f({textAlign:j===e?"":e},!0)}),[f,j]),N=!0===I,R=!0===_,B=!0===L,O=!0===A;return m.default.createElement(m.default.Fragment,null,m.default.createElement(u,null,m.default.createElement(T,{"aria-label":i.__("Line-height","web-stories"),isFloat:!0,value:x,min:y.MIN,max:y.MAX,suffix:m.default.createElement(l.Icons.LetterAHeight,null),onChange:(e,r)=>f({lineHeight:r},!0),allowEmpty:!0,isIndeterminate:n.MULTIPLE_VALUE===x,placeholder:n.MULTIPLE_VALUE===x?n.MULTIPLE_DISPLAY_VALUE:null,containerStyleOverride:g.inputContainerStyleOverride}),m.default.createElement(E,null),m.default.createElement(T,{"aria-label":i.__("Letter-spacing","web-stories"),value:v,min:h.MIN,max:h.MAX,suffix:m.default.createElement(l.Icons.LetterAWidth,null),unit:"%",onChange:M,allowEmpty:!0,isIndeterminate:n.MULTIPLE_VALUE===v,placeholder:n.MULTIPLE_VALUE===v?n.MULTIPLE_DISPLAY_VALUE:null,containerStyleOverride:g.inputContainerStyleOverride})),m.default.createElement(u,null,m.default.createElement(Toggle,{isToggled:"left"===j,onClick:P("left"),"aria-label":i.__("Align text left","web-stories")},m.default.createElement(l.Icons.AlignTextLeft,null)),m.default.createElement(Toggle,{isToggled:"center"===j,onClick:P("center"),"aria-label":i.__("Align text center","web-stories")},m.default.createElement(l.Icons.AlignTextCenter,null)),m.default.createElement(Toggle,{isToggled:"right"===j,onClick:P("right"),"aria-label":i.__("Align text right","web-stories")},m.default.createElement(l.Icons.AlignTextRight,null)),m.default.createElement(Toggle,{isToggled:"justify"===j,onClick:P("justify"),"aria-label":i.__("Align text justified","web-stories")},m.default.createElement(l.Icons.AlignTextJustified,null)),m.default.createElement(Toggle,{isToggled:N,onClick:()=>C(!N),"aria-label":i.__("Bold","web-stories")},m.default.createElement(l.Icons.LetterBBold,null)),m.default.createElement(Toggle,{isToggled:R,onClick:async()=>{await q(r.map((e=>{let{font:r,content:t}=e;return{font:r,fontStyle:R?"normal":"italic",fontWeight:b,content:o.stripHTML(t)}}))),U(!R)},"aria-label":i.__("Italic","web-stories")},m.default.createElement(l.Icons.LetterIItalic,null)),m.default.createElement(Toggle,{isToggled:B,onClick:()=>S(!B),"aria-label":i.__("Underline","web-stories")},m.default.createElement(l.Icons.LetterUUnderline,null)),m.default.createElement(Toggle,{isToggled:O,onClick:()=>k(!O),"aria-label":i.__("Uppercase","web-stories")},m.default.createElement(l.Icons.LetterTUppercase,null))))};
