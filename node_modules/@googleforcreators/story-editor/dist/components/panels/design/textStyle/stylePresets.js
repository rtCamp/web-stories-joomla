/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react");require("prop-types");var r=require("@googleforcreators/design-system"),t=require("@googleforcreators/i18n"),s=require("styled-components"),o=require("@googleforcreators/react");require("@googleforcreators/transform"),require("../../../dropTargets/provider.js"),require("../../../dropTargets/context.js"),require("../../../../app/history/historyProvider.js"),require("../../../../app/history/context.js"),require("@googleforcreators/templates"),require("../../../../app/config/context.js");var a=require("../../../../app/config/useConfig.js");require("../../../../app/api/context.js"),require("@googleforcreators/fonts"),require("@googleforcreators/dom");var i=require("../../../../constants/index.js");require("../../../../app/font/context.js"),require("@googleforcreators/media"),require("@googleforcreators/tracking"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("@googleforcreators/elements"),require("../../../../app/story/context.js"),require("@googleforcreators/migration"),require("../../../../app/story/actions/useSaveStory.js"),require("clone-deep"),require("../../../../app/story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../../../../app/story/storyTriggers/storyTriggersProvider.js"),require("../../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js");var l=require("../../../../app/story/useStory.js");require("../../../../app/media/useUploadMedia.js"),require("@googleforcreators/patterns"),require("../../../../utils/generateBlurhash.worker.js"),require("../../../../app/media/media3p/providerConfiguration.js"),require("../../../../app/media/utils/useFFmpeg.js"),require("../../../../app/media/media3p/api/context.js"),require("../../../../app/media/local/constants.js"),require("../../../../app/media/media3p/providerReducer.js"),require("../../../../app/media/context.js"),require("sat"),require("@googleforcreators/units"),require("../../../../app/layout/context.js"),require("../../../../app/layout/useZoomSetting.js"),require("@googleforcreators/rich-text"),require("@googleforcreators/stickers"),require("../../../library/panes/text/textPresets.js"),require("../../../../app/canvas/context.js"),require("../../../../app/currentUser/context.js"),require("../../../../app/helpCenter/provider.js"),require("../../../../app/helpCenter/context.js"),require("../../../helpCenter/constants.js"),require("../../../../app/rightClickMenu/context.js");var n=require("../../../../utils/useAddPreset.js"),u=require("../../../sidebar/useSidebar.js"),p=require("../../../styleManager/styleGroup.js"),d=require("../../../styleManager/styleManager.js"),c=require("../../../styleManager/components.js"),g=require("../../../styleManager/useApplyStyle.js");function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=y(e),q=y(s);const m=q.default.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),S=q.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),j=q.default(r.Text).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:r}=e;return r.colors.fg.secondary}),(e=>{let{theme:r}=e;return r.typography.weight.bold})),T=q.default(r.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),E=q.default(r.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:r}=e;return r.colors.fg.tertiary})),h={x:12};module.exports=function PresetPanel(e){let{pushUpdate:s}=e;const y=l((e=>{let{state:r}=e;return r.story.globalStoryStyles.textStyles})),{refs:{sidebar:q}}=u(),x=o.useRef(null),[_,P]=o.useState(!1),{isRTL:v,styleConstants:{topOffset:C}={}}=a(),R=y.length>0,A=g({pushUpdate:s}),{addGlobalPreset:N}=n({presetType:i.PRESET_TYPES.STYLE}),b=e=>{A(e)};return f.default.createElement(f.default.Fragment,null,f.default.createElement(m,null,f.default.createElement(j,{size:r.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t.__("Recently Saved Styles","web-stories")),f.default.createElement(T,{type:r.BUTTON_TYPES.TERTIARY,size:r.BUTTON_SIZES.SMALL,variant:r.BUTTON_VARIANTS.SQUARE,onClick:N,"aria-label":t.__("Add style","web-stories")},f.default.createElement(r.Icons.Plus,null))),R&&f.default.createElement(f.default.Fragment,null,f.default.createElement(S,null,f.default.createElement(p,{styles:[...y].reverse().slice(0,2),handleClick:b})),f.default.createElement(c.MoreButton,{ref:x,onClick:()=>P(!0),"aria-haspopup":"dialog","aria-expanded":_},t.__("More styles","web-stories"),f.default.createElement(r.Icons.ChevronDownSmall,null)),f.default.createElement(r.Popup,{topOffset:C,isRTL:v,anchor:x,dock:q,isOpen:_,placement:r.PLACEMENT.RIGHT_START,spacing:h,renderContents:()=>f.default.createElement(d,{styles:y,applyStyle:b,onClose:()=>P(!1)})})),!R&&f.default.createElement(c.NoStylesWrapper,null,f.default.createElement(E,{size:r.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t.__("No Styles Saved","web-stories"))))};
