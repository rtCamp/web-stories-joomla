/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("@googleforcreators/react"),t=require("@googleforcreators/design-system"),o=require("styled-components"),a=require("@googleforcreators/i18n");require("@googleforcreators/transform"),require("../../dropTargets/provider.js"),require("../../dropTargets/context.js"),require("../../../app/history/historyProvider.js"),require("../../../app/history/context.js"),require("prop-types"),require("@googleforcreators/templates"),require("../../../app/config/context.js");var s=require("../../../app/config/useConfig.js");require("../../../app/api/context.js"),require("@googleforcreators/fonts"),require("@googleforcreators/dom"),require("../../../constants/fonts.js"),require("../../../constants/multipleValue.js"),require("../../../app/font/context.js"),require("@googleforcreators/media"),require("@googleforcreators/tracking"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("@googleforcreators/elements"),require("../../../app/story/context.js"),require("@googleforcreators/migration"),require("../../../app/story/actions/useSaveStory.js"),require("clone-deep"),require("../../../app/story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../../../app/story/storyTriggers/storyTriggersProvider.js"),require("../../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js");var i=require("../../../app/story/useStory.js");require("../../../app/media/useUploadMedia.js"),require("@googleforcreators/patterns"),require("../../../utils/generateBlurhash.worker.js"),require("../../../app/media/media3p/providerConfiguration.js"),require("../../../app/media/utils/useFFmpeg.js"),require("../../../app/media/media3p/api/context.js"),require("../../../app/media/local/constants.js"),require("../../../app/media/media3p/providerReducer.js"),require("../../../app/media/context.js"),require("sat"),require("@googleforcreators/units"),require("../../../app/layout/context.js"),require("../../../app/layout/useZoomSetting.js"),require("@googleforcreators/rich-text"),require("@googleforcreators/stickers"),require("../../library/panes/text/textPresets.js"),require("../../../app/canvas/context.js"),require("../../../app/currentUser/context.js"),require("../../../app/helpCenter/provider.js"),require("../../../app/helpCenter/context.js"),require("../../helpCenter/constants.js"),require("../../../app/rightClickMenu/context.js");var u=require("../../../utils/storyUpdates.js"),n=require("../../sidebar/useSidebar.js"),l=require("../../panels/document/excerpt/excerpt.js"),p=require("../constants.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=c(e),g=c(o);const q=g.default.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),m=g.default(t.TextArea).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]);module.exports=()=>{const e=s((e=>{let{storyId:r}=e;return r})),o=i((e=>{let{actions:r}=e;return r.updateStory})),c=i((e=>{let{state:{story:r}}=e;return{[p.INPUT_KEYS.EXCERPT]:r.excerpt,[p.INPUT_KEYS.TITLE]:r.title||""}})),g=i((e=>{let{state:{story:{slug:r}}}=e;return r})),f=n((e=>{let{data:r}=e;return r?.modalSidebarTab?.IsolatedStatusPanel})),[T,y]=r.useState(c),E=r.useCallback((r=>{u.updateSlug({currentSlug:g,currentTitle:r,storyId:e,updateStory:o})}),[g,o,e]),S=r.useCallback((e=>{let{target:r}=e;const{value:t,name:a}=r;o({properties:{[a]:t}}),a===p.INPUT_KEYS.TITLE&&E(t)}),[E,o]),j=e=>{let{currentTarget:r}=e;y((e=>({...e,[r.name]:r.value})))};return d.default.createElement(d.default.Fragment,null,d.default.createElement(q,null,d.default.createElement(t.Headline,{as:"label",size:t.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:p.INPUT_KEYS.TITLE},a.__("Story Title","web-stories")),d.default.createElement(m,{name:p.INPUT_KEYS.TITLE,id:"story-title",showCount:!0,value:T[p.INPUT_KEYS.TITLE],onChange:j,onBlur:S,"aria-label":a.__("Story Title","web-stories"),placeholder:a.__("Add title","web-stories")})),d.default.createElement(q,null,d.default.createElement(t.Headline,{as:"label",size:t.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:p.INPUT_KEYS.EXCERPT},a.__("Story Description","web-stories")),d.default.createElement(m,{name:p.INPUT_KEYS.EXCERPT,id:"story-excerpt",showCount:!0,maxLength:l.EXCERPT_MAX_LENGTH,value:T[p.INPUT_KEYS.EXCERPT],"aria-label":a.__("Story Description","web-stories"),placeholder:a.__("Write a description of the story","web-stories"),hint:a.__("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:j,onBlur:S})),f&&d.default.createElement(f,null))};
