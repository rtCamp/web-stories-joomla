/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("@googleforcreators/i18n"),r=require("@googleforcreators/react"),t=require("@googleforcreators/design-system");module.exports=function(n,o){const[s,u]=r.useState(!1),[i,a]=r.useState(null),[l,c]=r.useState(null),[p,d]=r.useState(null),f=t.useLiveRegion("assertive"),v=r.useCallback((e=>{let{position:r,onStartReordering:t=(()=>{})}=e;return e=>{e.shiftKey||e.metaKey||(t(),c(r),d(e.target))}}),[]),g=r.useRef(null);return r.useEffect((()=>{g.current=i}),[i]),r.useEffect((()=>{if(!p)return;const e=e=>{if(e.preventDefault(),null!==g.current){const e=g.current;n(l,e>l?e-1:e)}d(null)},r=()=>u(!0),t=e=>{"Escape"===e.key&&(d(null),e.stopPropagation())};return p.ownerDocument.addEventListener("pointerup",e),p.ownerDocument.addEventListener("keydown",t,!0),p.addEventListener("pointermove",r),()=>{a(null),u(!1),p.removeEventListener("pointermove",r),p.ownerDocument.removeEventListener("pointerup",e),p.ownerDocument.removeEventListener("keydown",t,!0)}}),[p,l,a,u,n]),r.useEffect((()=>{if(s&&i){const r=o-i,t=e.sprintf(
/* translators: %d: new position. */
e.__("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),r);f(t)}}),[s,i,o,f]),{isReordering:s,currentSeparator:i,setCurrentSeparator:a,handleStartReordering:v}};
