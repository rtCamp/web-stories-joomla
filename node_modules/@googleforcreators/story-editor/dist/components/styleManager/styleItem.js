/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react"),r=require("styled-components");require("prop-types");var t=require("@googleforcreators/i18n"),o=require("@googleforcreators/patterns"),s=require("@googleforcreators/design-system"),i=require("@googleforcreators/elements"),n=require("@googleforcreators/react"),a=require("@googleforcreators/dom"),l=require("../../utils/presetUtils.js");require("../../constants/fonts.js"),require("../../constants/multipleValue.js"),require("@googleforcreators/animation"),require("uuid"),require("@googleforcreators/masks"),require("@googleforcreators/element-library"),require("../../app/story/context.js"),require("@googleforcreators/migration"),require("@googleforcreators/templates"),require("../../app/config/context.js"),require("../../app/api/context.js"),require("../../app/history/historyProvider.js"),require("../../app/history/context.js"),require("../../app/story/actions/useSaveStory.js"),require("clone-deep"),require("../../app/story/useStoryReducer/useStoryReducer.js"),require("@googleforcreators/output"),require("../../app/story/storyTriggers/storyTriggersProvider.js"),require("../../app/story/storyTriggers/storyEvents/onInitialElementAddedRegister.js"),require("../../app/story/storyTriggers/storyEvents/onPageAddedRegister.js");var u=require("../../app/story/useStory.js"),c=require("../panels/shared/styles.js");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=p(e),g=p(r);const y=g.default.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(e=>{let{theme:r}=e;return r.colors.interactiveBg.secondaryNormal}),32,32,16,16,(e=>{let{theme:r}=e;return r.colors.fg.primary}),c.focusStyle),m=g.default.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(e=>{let{background:r}=e;return o.generatePatternStyles(r)})),f=g.default.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(e=>{let{styles:r}=e;return r}),(e=>{let{background:r}=e;return r?o.generatePatternStyles(r):null}));module.exports=function StyleItem(e){let{style:r,i:o,activeIndex:c,handleOnClick:p,isEditMode:g,activeItemOverlay:q,applyLabel:x=t.__("Apply style","web-stories")}=e;const b=u((e=>{let{state:r}=e;return r.selectedElements})),[h,v]=n.useState(!1),j=()=>{q&&v(!0)},k=()=>{q&&v(!1)};if(!r)return null;const _=b[0]?.content?a.stripHTML(b[0].content):t.__("Lorem ipsum dolor sit amet","web-stories");return d.default.createElement(y,{tabIndex:c===o?0:-1,style:r,onClick:()=>p(r),onPointerEnter:j,onFocus:j,onPointerLeave:k,onBlur:k,"aria-label":g?t.__("Delete style","web-stories"):x},(()=>{const e=r.backgroundTextMode===i.BACKGROUND_TEXT_MODE.HIGHLIGHT,t=r.backgroundTextMode===i.BACKGROUND_TEXT_MODE.FILL;return d.default.createElement(f,{styles:l.generatePresetStyle(r,!0),background:t?r.backgroundColor:null},e?d.default.createElement(m,{background:r.backgroundColor},_):_)})(),g&&d.default.createElement(s.Icons.Cross,null),!g&&h&&q)};
