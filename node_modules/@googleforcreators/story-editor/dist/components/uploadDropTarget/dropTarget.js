/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("react");require("prop-types");var t=require("styled-components"),a=require("@googleforcreators/react"),r=require("../../utils/dragEvent.js"),o=require("./context.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=l(e),i=l(t);const d=i.default.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),s=i.default.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),p=i.default.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function u(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(e){let{disabled:t,label:l,labelledBy:i,onDrop:c,children:g}=e;const[f,D]=a.useState(!1),v=a.useCallback((e=>{const{dataTransfer:a}=e;r.isDraggingFile(e)&&(u(e),t?a.effectAllowed="none":(a.effectAllowed="copy",D(!0)))}),[t]),b=a.useCallback((e=>{u(e),D(!1)}),[]),h=a.useCallback((e=>{u(e),D(!1),!t&&c&&c([...e.dataTransfer.files])}),[t,c]);return n.default.createElement(d,{onDragEnter:v,onDrop:h,onDragOver:u},f&&n.default.createElement(p,{onDragEnter:v,onDragLeave:b,onDragOver:u,onDrop:h,"aria-label":l,"aria-labelledby":i}),n.default.createElement(o.Provider,{value:{isDragging:f}},n.default.createElement(s,null,g)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null},module.exports=UploadDropTarget;
