/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var t=require("@googleforcreators/units"),e=require("@googleforcreators/elements");const i=[1,0];function n(t){return"number"==typeof t}module.exports=function(o,r,s,u){let E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{updateForResizeEvent:l,defaultAttributes:h}=e.getDefinitionForType(o);if(n(r)||(r=n(s)?s*E:a?Math.min(a.width*t.DEFAULT_DPR,.8*t.PAGE_WIDTH):t.PAGE_WIDTH/2),!n(s)&&l&&(s=l({...h,...u},i,r).height),n(s)||(s=r/E),r>t.PAGE_WIDTH||s>t.PAGE_HEIGHT){const e=r/s;e<=t.PAGE_WIDTH/t.PAGE_HEIGHT?s=(r=Math.min(r,t.PAGE_WIDTH))/e:r=(s=Math.min(s,t.PAGE_HEIGHT))*e}return{width:r=t.dataPixels(r),height:s=t.dataPixels(s)}};
