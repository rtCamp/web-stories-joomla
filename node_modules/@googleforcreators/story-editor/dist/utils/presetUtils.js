/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@googleforcreators/patterns"),t=require("@googleforcreators/rich-text"),r=require("@googleforcreators/element-library"),n=require("@googleforcreators/elements"),o=require("../constants/index.js"),l=require("./objectPick.js"),i=require("../constants/multipleValue.js");const c=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function a(t,r,n){const o=r.colors,l=n?"color":"background";return o.find((r=>{try{return e.isPatternEqual(r,t,l)}catch(e){return!1}}))}function s(t,r){const n=r.textStyles,o=e.convertToCSS(u(t));return n.find((t=>o===e.convertToCSS(u(t))))}function u(t,o){const{color:l,backgroundColor:i,font:c,fontWeight:a,backgroundTextMode:s,textAlign:u,letterSpacing:g,lineHeight:f,isItalic:d,isUnderline:S,padding:p,fontSize:T}=t;let x={textAlign:u,letterSpacing:g/100+"em",fontWeight:a,textDecoration:S?"underline":null,fontStyle:d?"italic":null,fontFamily:r.generateFontFamily(c),...e.generatePatternStyles(l,"color")};return o||(x={...x,fontSize:T,lineHeight:f,padding:p,backgroundTextMode:s}),s===n.BACKGROUND_TEXT_MODE.NONE||o&&s===n.BACKGROUND_TEXT_MODE.HIGHLIGHT||(x={...x,...e.generatePatternStyles(i,"background")}),x}function g(e){return e!==i.MULTIPLE_VALUE?e:null}function f(r){const{color:n,fontWeight:o,isItalic:l,isUnderline:c,letterSpacing:a}=t.getHTMLInfo(r);return{color:n!==i.MULTIPLE_VALUE?n:e.createSolid(0,0,0),fontWeight:g(o),isItalic:g(l),isUnderline:g(c),letterSpacing:g(a)}}exports.areAllType=function(e,t){return t.length>0&&t.every((t=>{let{type:r}=t;return e===r}))},exports.findMatchingColor=a,exports.findMatchingStylePreset=s,exports.generatePresetStyle=u,exports.getPagePreset=function(e,t){return{colors:[e.backgroundColor].filter((e=>e&&!a(e,t,!1)))}},exports.getShapePresets=function(e,t){return{colors:e.map((e=>{let{backgroundColor:t}=e;return t||null})).filter((e=>e&&!a(e,t,!1)))}},exports.getTextInlineStyles=f,exports.getTextPresets=function(e,r,n,u){return{colors:o.PRESET_TYPES.STYLE===n?[]:e.map((e=>{let{content:r,backgroundColor:n}=e;return u?n:t.getHTMLInfo(r).color})).filter((e=>e!==i.MULTIPLE_VALUE)).filter((e=>e&&!a(e,r,!0))),textStyles:o.PRESET_TYPES.COLOR===n?[]:e.map((e=>({...l(e,c),...f(e.content)}))).filter((e=>!s(e,r)))}};
