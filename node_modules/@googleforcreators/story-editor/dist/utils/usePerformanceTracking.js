/**
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";var e=require("@googleforcreators/react"),t=require("@googleforcreators/tracking");const r={},n=["click","pointerdown","pointerup"];let o;module.exports=function(a){let{node:i,eventData:s,eventType:c="click"}=a;const m="undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("event");!o&&m&&(o=new PerformanceObserver((e=>{for(const o of e.getEntries())n.includes(o.name)&&r[o.startTime]?.category&&!r[o.startTime]?.isReported&&(r[o.startTime].isReported=!0,t.trackTiming(r[o.startTime].category,o.duration,r[o.startTime].label,o.name))})),o.observe({entryTypes:["event"]}));const{label:l,category:p}=s;e.useEffect((()=>{if(!i||!m)return;const e=i,t=e=>{r[e.timeStamp]={category:p,time:e.timeStamp},l&&(r[e.timeStamp].label=l)};return e.addEventListener(c,t),()=>{e.removeEventListener(c,t)}}),[p,l,i,c,m])};
